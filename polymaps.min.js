if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(v){function ha(d){var g=d.indexOf(":");return g<0?d:{space:v.ns[d.substring(0,g)],local:d.substring(g+1)}}function S(){for(var d=0;d<S.maps.length;d++)S.maps[d].resize()}function Y(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function Z(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function aa(d,g){if(d.row>g.row){var c=d;d=g;g=c}return{x0:d.column,y0:d.row,x1:g.column,y1:g.row,dx:g.column-d.column,dy:g.row-d.row}}function ea(d,g,c,l,e){c=Math.max(c,Math.floor(g.y0));
l=Math.min(l,Math.ceil(g.y1));if(d.x0==g.x0&&d.y0==g.y0?d.x0+g.dy/d.dy*d.dx<g.x1:d.x1-g.dy/d.dy*d.dx<g.x0){var a=d;d=g;g=a}a=d.dx/d.dy;var f=g.dx/g.dy,j=d.dx>0,r=g.dx<0;for(c=c;c<l;c++){var q=a*Math.max(0,Math.min(d.dy,c+j-d.y0))+d.x0;e(Math.floor(f*Math.max(0,Math.min(g.dy,c+r-g.y0))+g.x0),Math.ceil(q),c)}}function fa(d,g,c,l,e,a){var f=aa(d,g);g=aa(g,c);d=aa(c,d);if(f.dy>g.dy){c=f;f=g;g=c}if(f.dy>d.dy){c=f;f=d;d=c}if(g.dy>d.dy){c=g;g=d;d=c}f.dy&&ea(d,f,l,e,a);g.dy&&ea(d,g,l,e,a)}v.version="2.5.1";
var $={x:0,y:0};v.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};v.id=function(){var d=0;return function(){return++d}}();v.svg=function(d){return document.createElementNS(v.ns.svg,d)};v.transform=function(d,g,c,l,e,a){var f={},j,r,q;if(!arguments.length){d=1;g=e=c=0;l=1;a=0}f.zoomFraction=function(k){if(!arguments.length)return r;r=k;j=Math.floor(r+Math.log(Math.sqrt(d*d+g*g+c*c+l*l))/Math.LN2);q=Math.pow(2,-j);return f};f.apply=function(k){var i=Math.pow(2,-k.zoom),t=
Math.pow(2,k.zoom-j);return{column:(d*k.column*i+c*k.row*i+e)*t,row:(g*k.column*i+l*k.row*i+a)*t,zoom:k.zoom-j}};f.unapply=function(k){var i=Math.pow(2,-k.zoom),t=Math.pow(2,k.zoom+j);return{column:(k.column*i*l-k.row*i*c-e*l+a*c)/(d*l-g*c)*t,row:(k.column*i*g-k.row*i*d-e*g+a*d)/(c*g-l*d)*t,zoom:k.zoom+j}};f.toString=function(){return"matrix("+[d*q,g*q,c*q,l*q].join(" ")+" 0 0)"};return f.zoomFraction(0)};v.cache=function(d,g){function c(i){k--;g&&g(i);delete f[i.key];if(i.next)i.next.prev=i.prev;
else if(r=i.prev)r.next=null;if(i.prev)i.prev.next=i.next;else if(j=i.next)j.prev=null}function l(){for(var i=r;k>q;i=i.prev){if(!i)break;i.lock||c(i)}}var e={},a={},f={},j=null,r=null,q=64,k=0;e.peek=function(i){return f[[i.zoom,i.column,i.row].join("/")]};e.load=function(i,t){var u=[i.zoom,i.column,i.row].join("/"),w=f[u];if(w){if(w.prev){if(w.prev.next=w.next)w.next.prev=w.prev;else r=w.prev;w.prev=null;w.next=j;j=j.prev=w}w.lock=1;return a[u]=w}w={key:u,column:i.column,row:i.row,zoom:i.zoom,next:j,
prev:null,lock:1};d.call(null,w,t);a[u]=f[u]=w;if(j)j.prev=w;else r=w;j=w;k++;return w};e.unload=function(i){if(!(i in a))return false;var t=a[i];t.lock=0;delete a[i];t.request&&t.request.abort(false)&&c(t);return t};e.locks=function(){return a};e.size=function(i){if(!arguments.length)return q;q=i;l();return e};e.flush=function(){l();return e};e.clear=function(){for(var i in f){var t=f[i];t.request&&t.request.abort(false);g&&g(f[i]);if(t.lock){t.lock=0;t.element.parentNode.removeChild(t.element)}}a=
{};f={};j=r=null;k=0;return e};return e};v.url=function(d){function g(e){var a=e.zoom<0?1:1<<e.zoom,f=e.column;if(l){f=e.column%a;if(f<0)f+=a}else if(f<0||f>=a)return null;return d.replace(/{(.)}/g,function(j,r){switch(r){case "S":return c[(Math.abs(e.zoom)+e.row+f)%c.length];case "Z":return e.zoom;case "X":return f;case "Y":return e.row;case "B":var q=v.map.coordinateLocation({row:e.row,column:f,zoom:e.zoom}),k=v.map.coordinateLocation({row:e.row+1,column:f+1,zoom:e.zoom}),i=Math.ceil(Math.log(e.zoom)/
Math.LN2);return k.lat.toFixed(i)+","+q.lon.toFixed(i)+","+q.lat.toFixed(i)+","+k.lon.toFixed(i)}return r})}var c=[],l=true;g.template=function(e){if(!arguments.length)return d;d=e;return g};g.hosts=function(e){if(!arguments.length)return c;c=e;return g};g.repeat=function(e){if(!arguments.length)return l;l=e;return g};return g};v.dispatch=function(d){var g={};d.on=function(c,l){for(var e=g[c]||(g[c]=[]),a=0;a<e.length;a++)if(e[a].handler==l)return d;e.push({handler:l,on:true});return d};d.off=function(c,
l){var e=g[c];if(e)for(var a=0;a<e.length;a++){var f=e[a];if(f.handler==l){f.on=false;e.splice(a,1);break}}return d};return function(c){var l=g[c.type];if(l){l=l.slice();for(var e=0;e<l.length;e++){var a=l[e];a.on&&a.handler.call(d,c)}}}};v.queue=function(){function d(){if(!(e>=a||!l.length)){e++;l.pop()()}}function g(f){for(var j=0;j<l.length;j++)if(l[j]==f){l.splice(j,1);return true}return false}function c(f,j,r){function q(){k=new XMLHttpRequest;r&&k.overrideMimeType&&k.overrideMimeType(r);k.open("GET",
f,true);k.onreadystatechange=function(){if(k.readyState==4){e--;k.status<300&&j(k);d()}};k.send(null)}var k;l.push(q);d();return{abort:function(i){if(g(q))return true;if(i&&k){k.abort();return true}return false}}}var l=[],e=0,a=6;return{text:function(f,j,r){return c(f,function(q){q.responseText&&j(q.responseText)},r)},xml:function(f,j){return c(f,function(r){r.responseXML&&j(r.responseXML)},"application/xml")},json:function(f,j){return c(f,function(r){r.responseText&&j(JSON.parse(r.responseText))},
"application/json")},image:function(f,j,r){function q(){k=document.createElement("img");k.onerror=function(){e--;d()};k.onload=function(){e--;r(k);d()};k.src=j;f.setAttributeNS(v.ns.xlink,"href",j)}var k;l.push(q);d();return{abort:function(i){if(g(q))return true;if(i&&k){k.src="about:";return true}return false}}}}}();(function(){var d=!!window.ActiveXObject,g=d&&!window.XMLHttpRequest,c=d&&!document.querySelector,l=navigator.userAgent.toLowerCase(),e=l.indexOf("webkit")!==-1,a=l.indexOf("chrome")!==
-1,f=l.indexOf("android")!==-1;l=l.search("android [23]")!==-1;var j=typeof orientation!=="undefined",r=window.navigator&&window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints,q="devicePixelRatio"in window&&window.devicePixelRatio>1||"matchMedia"in window&&window.matchMedia("(min-resolution:144dpi)")&&window.matchMedia("(min-resolution:144dpi)").matches,k=document.documentElement,i=d&&"transition"in k.style,t="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix,u="MozPerspective"in
k.style,w="OTransition"in k.style,z=!window.P_DISABLE_3D&&(i||t||u||w),E=!window.P_NO_TOUCH&&function(){if(r||"ontouchstart"in k)return true;var y=document.createElement("div"),F=false;if(!y.setAttribute)return false;y.setAttribute("ontouchstart","return;");if(typeof y.ontouchstart==="function")F=true;y.removeAttribute("ontouchstart");return F}();v.browser={ie:d,ie6:g,ie7:c,webkit:e,android:f,android23:l,chrome:a,ie3d:i,webkit3d:t,gecko3d:u,opera3d:w,any3d:z,mobile:j,mobileWebkit:j&&e,mobileWebkit3d:j&&
t,mobileOpera:j&&window.opera,touch:E,msTouch:r,retina:q}})();v.map=function(){function d(){if(t)if(q<t[0])q=t[0];else if(q>t[1])q=t[1];k=q-(q=Math.round(q));i=Math.pow(2,k)}function g(){if(o){var h=45/Math.pow(2,q+k-3),n=Math.max(Math.abs(z*f.x+w*f.y),Math.abs(y*f.x+E*f.y)),s=Y(F-n*h/j.y);n=Y(m+n*h/j.y);r.lat=Math.max(s,Math.min(n,r.lat));s=Math.max(Math.abs(z*f.y+w*f.x),Math.abs(y*f.y+E*f.x));r.lon=Math.max(o[0].lon-s*h/j.x,Math.min(o[1].lon+s*h/j.x,r.lon))}}var c={},l,e,a=$,f=$,j={x:256,y:256},
r={lat:37.76487,lon:-122.41948},q=12,k=0,i=1,t=[1,18],u=0,w=1,z=0,E=1,y=0,F=-180,m=180,o=[{lat:Y(F),lon:-Infinity},{lat:Y(m),lon:Infinity}];c.locationCoordinate=function(h){h=v.map.locationCoordinate(h);var n=Math.pow(2,q);h.column*=n;h.row*=n;h.zoom+=q;return h};c.coordinateLocation=v.map.coordinateLocation;c.coordinatePoint=function(h,n){var s=Math.pow(2,q-n.zoom),C=Math.pow(2,q-h.zoom),D=(n.column*s-h.column*C)*j.x*i;s=(n.row*s-h.row*C)*j.y*i;return{x:f.x+w*D-z*s,y:f.y+z*D+w*s}};c.pointCoordinate=
function(h,n){var s=Math.pow(2,q-h.zoom),C=(n.x-f.x)/i,D=(n.y-f.y)/i;return{column:h.column*s+(E*C-y*D)/j.x,row:h.row*s+(y*C+E*D)/j.y,zoom:q}};c.locationPoint=function(h){var n=Math.pow(2,q+k-3)/45,s=(h.lon-r.lon)*n*j.x;h=(Z(r.lat)-Z(h.lat))*n*j.y;return{x:f.x+w*s-z*h,y:f.y+z*s+w*h}};c.pointLocation=function(h){var n=45/Math.pow(2,q+k-3),s=(h.x-f.x)*n;h=(h.y-f.y)*n;return{lon:r.lon+(E*s-y*h)/j.x,lat:Y(Z(r.lat)-(y*s+E*h)/j.y)}};var x=v.svg("rect");x.setAttribute("visibility","hidden");x.setAttribute("pointer-events",
"all");c.container=function(h){if(!arguments.length)return l;l=h;l.setAttribute("class","map");l.appendChild(x);return c.resize()};c.focusableParent=function(){for(var h=l;h;h=h.parentNode)if(h.tabIndex>=0)return h;return window};c.mouse=function(h){var n=(l.ownerSVGElement||l).createSVGPoint();if(ba<0&&(window.scrollX||window.scrollY)){var s=document.body.appendChild(v.svg("svg"));s.style.position="absolute";s.style.top=s.style.left="0px";var C=s.getScreenCTM();ba=!(C.f||C.e);document.body.removeChild(s)}if(ba){n.x=
h.pageX;n.y=h.pageY}else{n.x=h.clientX;n.y=h.clientY}return n.matrixTransform(l.getScreenCTM().inverse())};c.size=function(h){if(!arguments.length)return a;e=h;return c.resize()};c.resize=function(){if(e){a=e;S.remove(c)}else{x.setAttribute("width","100%");x.setAttribute("height","100%");b=x.getBBox();a={x:b.width,y:b.height};S.add(c)}x.setAttribute("width",a.x);x.setAttribute("height",a.y);f={x:a.x/2,y:a.y/2};g();c.dispatch({type:"resize"});return c};c.tileSize=function(h){if(!arguments.length)return j;
j=h;c.dispatch({type:"move"});return c};c.center=function(h){if(!arguments.length)return r;r=h;g();c.dispatch({type:"move"});return c};c.panBy=function(h){var n=45/Math.pow(2,q+k-3),s=h.x*n;h=h.y*n;return c.center({lon:r.lon+(y*h-E*s)/j.x,lat:Y(Z(r.lat)+(y*s+E*h)/j.y)})};c.centerRange=function(h){if(!arguments.length)return o;if(o=h){F=o[0].lat>-90?Z(o[0].lat):-Infinity;m=o[0].lat<90?Z(o[1].lat):Infinity}else{F=-Infinity;m=Infinity}g();c.dispatch({type:"move"});return c};c.zoom=function(h){if(!arguments.length)return q+
k;q=h;d();return c.center(r)};c.zoomBy=function(h,n,s){if(arguments.length<2)return c.zoom(q+k+h);if(arguments.length<3)s=c.pointLocation(n);q=q+k+h;d();var C=c.locationPoint(s);return c.panBy({x:n.x-C.x,y:n.y-C.y})};c.zoomRange=function(h){if(!arguments.length)return t;t=h;return c.zoom(q+k)};c.extent=function(h){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,y:0})];var n=c.locationPoint(h[0]),s=c.locationPoint(h[1]),C=Math.max((s.x-n.x)/a.x,(n.y-s.y)/a.y);n=c.pointLocation({x:(n.x+
s.x)/2,y:(n.y+s.y)/2});q=q+k-Math.log(C)/Math.LN2;d();return c.center(n)};c.angle=function(h){if(!arguments.length)return u;u=h;w=Math.cos(u);z=Math.sin(u);E=Math.cos(-u);y=Math.sin(-u);g();c.dispatch({type:"move"});return c};c.add=function(h){h.map(c);return c};c.remove=function(h){h.map(null);return c};c.dispatch=v.dispatch(c);return c};S.maps=[];S.add=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==d)return;S.maps.push(d)};S.remove=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==
d){S.maps.splice(g,1);return}};if(window.addEventListener){window.addEventListener("resize",S,false);window.addEventListener("load",S,false)}v.map.locationCoordinate=function(d){var g=1/360;return{column:(d.lon+180)*g,row:(180-Z(d.lat))*g,zoom:0}};v.map.coordinateLocation=function(d){var g=45/Math.pow(2,d.zoom-3);return{lon:g*d.column-180,lat:Y(180-g*d.row)}};var ba=/WebKit/.test(navigator.userAgent)?-1:0;v.layer=function(d,g){function c(y){for(var F=z[0].nextSibling;w<y;w++){t.insertBefore(z[-4],
F);t.insertBefore(z[2],F);t.insertBefore(z[1],F);for(var m=z[-4],o=-4;o<2;)z[o]=z[++o];z[o]=m}}function l(y){for(var F=z[0].nextSibling;w>y;w--){t.insertBefore(z[-1],F);t.insertBefore(z[2],z[-4]);for(var m=z[2],o=2;o>-4;)z[o]=z[--o];z[o]=m}}function e(){function y(O){var A=O.zoom,G=A<0?1:1<<A,I=O.column%G,K=O.row;if(I<0)I+=G;return{locationPoint:function(L){L=v.map.locationCoordinate(L);var P=Math.pow(2,A-L.zoom);return{x:C.x*(P*L.column-I),y:C.y*(P*L.row-K)}}}}function F(O,A,G){var I=M.zoom,K=2-
Q,L=4+Q;for(O=O;O<A;O++){var P=f.load({column:O,row:G,zoom:I},y);if(!P.ready&&!(P.key in H)){P.proxyRefs={};for(var W,X,U,V=1;V<=K;V++){X=true;for(var ca=0,ga=1<<V;ca<=ga;ca++)for(var da=0;da<=ga;da++)if((U=f.peek(W={column:(O<<V)+da,row:(G<<V)+ca,zoom:I+V}))&&U.ready){H[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U}else X=false;if(X)break}if(!X)for(V=1;V<=L;V++)if((U=f.peek(W={column:O>>V,row:G>>V,zoom:I-V}))&&U.ready){H[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U;break}}H[P.key]=
P}}function m(O){return Math.round(O*256)/256}var o=a.map(),x=o.zoom(),h=x-(x=Math.round(x)),n=o.size(),s=o.angle(),C=o.tileSize(),D=o.locationCoordinate(o.center());if(w!=x){if(w<x)c(x);else if(w>x)l(x);else w=x;for(var B=-4;B<=2;B++){var N=z[B];N.setAttribute("class","zoom"+(B<0?"":"+")+B+" zoom"+(x+B));N.setAttribute("transform","scale("+Math.pow(2,-B)+")")}}var M=o.pointCoordinate(D,$);B=o.pointCoordinate(D,{x:n.x,y:0});x=o.pointCoordinate(D,n);o=o.pointCoordinate(D,{x:0,y:n.y});N=D.column;var T=
D.row;D.column=Math.round((Math.round(C.x*D.column)+(n.x&1)/2)/C.x);D.row=Math.round((Math.round(C.y*D.row)+(n.y&1)/2)/C.y);N-=D.column;T-=D.row;var J=m(Math.pow(2,h));t.setAttribute("transform","translate("+Math.round(n.x/2-N*C.x*J)+","+Math.round(n.y/2-T*C.y*J)+")"+(s?"rotate("+s/Math.PI*180+")":"")+(h?"scale("+J+")":"")+(u?u.zoomFraction(h):""));if(u){M=u.unapply(M);B=u.unapply(B);x=u.unapply(x);o=u.unapply(o);D=u.unapply(D)}var Q=q?q(M.zoom)-M.zoom:0;if(Q){n=Math.pow(2,Q);M.column*=n;M.row*=n;
B.column*=n;B.row*=n;x.column*=n;x.row*=n;o.column*=n;o.row*=n;M.zoom=B.zoom=x.zoom=o.zoom+=Q}h=f.locks();var H={};for(var R in h)h[R].proxyCount=0;if(r&&Q>-5&&Q<3){s=M.zoom<0?1:1<<M.zoom;if(j){fa(M,B,x,0,s,F);fa(x,o,M,0,s,F)}else{n=Math.floor((M.column+x.column)/2);s=Math.max(0,Math.min(s-1,Math.floor((B.row+o.row)/2)));B=Math.min(4,M.zoom);n=n>>B<<B;s=s>>B<<B;F(n,n+1,s)}}for(R in H){B=H[R];n=m(Math.pow(2,B.level=B.zoom-D.zoom));B.element.setAttribute("transform","translate("+Math.round(B.x=C.x*
(B.column-D.column*n))+","+Math.round(B.y=C.y*(B.row-D.row*n))+")")}for(R in h)if(!(R in H)){B=f.unload(R);B.element.parentNode.removeChild(B.element);delete B.proxyRefs}for(R in H){B=H[R];if(B.element.parentNode!=z[B.level]){z[B.level].appendChild(B.element);a.show&&a.show(B)}}f.flush();a.dispatch({type:"move"})}var a={},f=a.cache=v.cache(d,g).size(512),j=true,r=true,q,k,i,t=v.svg("g"),u,w,z={};t.setAttribute("class","layer");for(var E=-4;E<=-1;E++)z[E]=t.appendChild(v.svg("g"));for(E=2;E>=1;E--)z[E]=
t.appendChild(v.svg("g"));z[0]=t.appendChild(v.svg("g"));a.map=function(y){if(!arguments.length)return i;if(i){if(i==y){t.parentNode.appendChild(t);return a}i.off("move",e).off("resize",e);t.parentNode.removeChild(t)}if(i=y){i.container().appendChild(t);a.init&&a.init(t);i.on("move",e).on("resize",e);e()}return a};a.container=function(){return t};a.levels=function(){return z};a.id=function(y){if(!arguments.length)return k;k=y;t.setAttribute("id",y);return a};a.visible=function(y){if(!arguments.length)return r;
(r=y)?t.removeAttribute("visibility"):t.setAttribute("visibility","hidden");i&&e();return a};a.transform=function(y){if(!arguments.length)return u;u=y;i&&e();return a};a.zoom=function(y){if(!arguments.length)return q;q=typeof y=="function"||y==null?y:function(){return y};i&&e();return a};a.tile=function(y){if(!arguments.length)return j;j=y;i&&e();return a};a.reload=function(){f.clear();i&&e();return a};a.dispatch=v.dispatch(a);a.on("load",function(y){if(y.tile.proxyRefs){for(var F in y.tile.proxyRefs){var m=
y.tile.proxyRefs[F];--m.proxyCount<=0&&f.unload(F)&&m.element.parentNode.removeChild(m.element)}delete y.tile.proxyRefs}});return a};v.image=function(){var d=v.layer(function(c){var l=c.element=v.svg("image"),e=d.map().tileSize();l.setAttribute("preserveAspectRatio","none");l.setAttribute("width",e.x);l.setAttribute("height",e.y);if(typeof g=="function"){l.setAttribute("opacity",0);e=g(c);if(e!=null)c.request=v.queue.image(l,e,function(a){delete c.request;c.ready=true;c.img=a;l.removeAttribute("opacity");
d.dispatch({type:"load",tile:c})});else{c.ready=true;d.dispatch({type:"load",tile:c})}}else{c.ready=true;g!=null&&l.setAttributeNS(v.ns.xlink,"href",g);d.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),g;d.url=function(c){if(!arguments.length)return g;g=typeof c=="string"&&/{.}/.test(c)?v.url(c):c;return d.reload()};return d};v.geoJson=function(d){function g(m){var o={lat:0,lon:0};return function(x){o.lat=x[1];o.lon=x[0];var h=m(o);x.x=h.x;x.y=h.y;return h}}function c(m,
o){return m&&m.type in z&&z[m.type](m,o)}function l(m,o,x){return m.type in E&&E[m.type](m,o,x)}function e(){var m=a.map().zoom(),o=a.cache.locks(),x,h,n,s,C,D,B;if(u=="fixed")for(x in o){if((h=o[x]).scale!=m){B="scale("+Math.pow(2,h.zoom-m)+")";s=-1;for(C=(n=h.features).length;++s<C;)l((D=n[s]).data.geometry,D.element,B);h.scale=m}}else for(x in o){s=-1;for(C=(n=(h=o[x]).features).length;++s<C;)l((D=n[s]).data.geometry,D.element,"");delete h.scale}}var a=v.layer(function(m,o){function x(n){var s=
[];if(n.next)m.request=d(n.next.href,x);switch(n.type){case "FeatureCollection":for(var C=0;C<n.features.length;C++){var D=n.features[C],B=c(D.geometry,o);B&&s.push({element:h.appendChild(B),data:D})}break;case "Feature":(B=c(n.geometry,o))&&s.push({element:h.appendChild(B),data:n});break;default:(B=c(n,o))&&s.push({element:h.appendChild(B),data:{type:"Feature",geometry:n}});break}m.ready=true;s.push.apply(m.features,s);a.dispatch({type:"load",tile:m,features:s})}var h=m.element=v.svg("g");m.features=
[];o=g(o(m).locationPoint);if(j!=null)m.request=d(typeof j=="function"?j(m):j,x);else x({type:"FeatureCollection",features:w||[]})},function(m){m.request&&m.request.abort(true)}),f=a.container(),j,r=true,q="org.polymaps."+v.id(),k="url(#"+q+")",i=f.insertBefore(v.svg("clipPath"),f.firstChild),t=i.appendChild(v.svg("rect")),u="auto",w;f.setAttribute("fill-rule","evenodd");i.setAttribute("id",q);if(!arguments.length)d=v.queue.json;var z={Point:function(m,o){var x=o(m.coordinates),h=v.svg("circle");
h.setAttribute("r",4.5);h.setAttribute("transform","translate("+x.x+","+x.y+")");return h},MultiPoint:function(m,o){for(var x=v.svg("g"),h=m.coordinates,n,s,C=-1,D=h.length;++C<D;){s=x.appendChild(v.svg("circle"));s.setAttribute("r",4.5);s.setAttribute("transform","translate("+(n=o(h[C])).x+","+n.y+")")}return x},LineString:function(m,o){for(var x=v.svg("path"),h=["M"],n=m.coordinates,s,C=-1,D=n.length;++C<D;)h.push((s=o(n[C])).x,",",s.y,"L");h.pop();if(h.length){x.setAttribute("d",h.join(""));return x}},
MultiLineString:function(m,o){for(var x=v.svg("path"),h=[],n=m.coordinates,s,C=-1,D,B=n.length,N;++C<B;){s=n[C];D=-1;N=s.length;for(h.push("M");++D<N;)h.push((p=o(s[D])).x,",",p.y,"L");h.pop()}if(h.length){x.setAttribute("d",h.join(""));return x}},Polygon:function(m,o){for(var x=v.svg("path"),h=[],n=m.coordinates,s,C=-1,D,B=n.length,N;++C<B;){s=n[C];D=-1;N=s.length-1;for(h.push("M");++D<N;)h.push((p=o(s[D])).x,",",p.y,"L");h[h.length-1]="Z"}if(h.length){x.setAttribute("d",h.join(""));return x}},MultiPolygon:function(m,
o){for(var x=v.svg("path"),h=[],n=m.coordinates,s,C,D=-1,B,N,M=n.length,T,J;++D<M;){s=n[D];B=-1;for(T=s.length;++B<T;){C=s[B];N=-1;J=C.length-1;for(h.push("M");++N<J;)h.push((p=o(C[N])).x,",",p.y,"L");h[h.length-1]="Z"}}if(h.length){x.setAttribute("d",h.join(""));return x}},GeometryCollection:function(m,o){for(var x=v.svg("g"),h=-1,n=m.geometries,s=n.length,C;++h<s;)(C=c(n[h],o))&&x.appendChild(C);return x}},E={Point:function(m,o,x){m=m.coordinates;o.setAttribute("transform","translate("+m.x+","+
m.y+")"+x)},MultiPoint:function(m,o,x){m=m.coordinates;var h=-1,n=s.length;o=o.firstChild;for(var s;++h<n;){s=m[h];o.setAttribute("transform","translate("+s.x+","+s.y+")"+x);o=o.nextSibling}}};a.url=function(m){if(!arguments.length)return j;j=typeof m=="string"&&/{.}/.test(m)?v.url(m):m;if(j!=null)w=null;typeof j=="string"&&a.tile(false);return a.reload()};a.features=function(m){if(!arguments.length)return w;if(w=m){j=null;a.tile(false)}return a.reload()};a.clip=function(m){if(!arguments.length)return r;
r&&f.removeChild(i);if(r=m)f.insertBefore(i,f.firstChild);var o=a.cache.locks();for(var x in o)r?o[x].element.setAttribute("clip-path",k):o[x].element.removeAttribute("clip-path");return a};var y=a.tile;a.tile=function(m){arguments.length&&!m&&a.clip(m);return y.apply(a,arguments)};var F=a.map;a.map=function(m){if(m&&t){var o=m.tileSize();t.setAttribute("width",o.x);t.setAttribute("height",o.y)}return F.apply(a,arguments)};a.scale=function(m){if(!arguments.length)return u;(u=m)?a.on("move",e):a.off("move",
e);a.map()&&e();return a};a.show=function(m){r?m.element.setAttribute("clip-path",k):m.element.removeAttribute("clip-path");a.dispatch({type:"show",tile:m,features:m.features});return a};a.reshow=function(){var m=a.cache.locks();for(var o in m)a.show(m[o]);return a};return a};v.dblclick=function(){function d(a){var f=l.zoom();f=a.shiftKey?Math.ceil(f)-f-1:1-f+Math.floor(f);c==="mouse"?l.zoomBy(f,l.mouse(a)):l.zoomBy(f)}var g={},c="mouse",l,e;g.zoom=function(a){if(!arguments.length)return c;c=a;return g};
g.map=function(a){if(!arguments.length)return l;if(l){e.removeEventListener("dblclick",d,false);e=null}if(l=a){e=l.container();e.addEventListener("dblclick",d,false)}return g};return g};v.drag=function(){function d(f){if(!f.shiftKey){a={x:f.clientX,y:f.clientY};l.focusableParent().focus();f.preventDefault();document.body.style.setProperty("cursor","move",null)}}function g(f){if(a){l.panBy({x:f.clientX-a.x,y:f.clientY-a.y});a.x=f.clientX;a.y=f.clientY}}var c={},l,e,a;c.map=function(f){if(!arguments.length)return l;
if(l){e.removeEventListener("mousedown",d,false);e=null}if(l=f){e=l.container();e.addEventListener("mousedown",d,false)}return c};window.addEventListener("mousemove",g,false);window.addEventListener("mouseup",function(f){if(a){g(f);a=null;document.body.style.removeProperty("cursor")}},false);return c};v.wheel=function(){function d(){f=null}function g(i){var t=i.wheelDelta||-i.detail,u;if(t)if(e){try{k.scrollTop=1E3;k.dispatchEvent(i);t=1E3-k.scrollTop}catch(w){}t*=0.0050}else{u=Date.now();if(u-l>
200){t=t>0?+1:-1;l=u}else t=0}if(t)switch(a){case "mouse":u=j.mouse(i);f||(f=j.pointLocation(u));j.off("move",d).zoomBy(t,u,f).on("move",d);break;case "location":j.zoomBy(t,j.locationPoint(f),f);break;default:j.zoomBy(t);break}i.preventDefault();return false}var c={},l=0,e=true,a="mouse",f,j,r,q=document.createElement("div"),k=document.createElement("div");k.style.visibility="hidden";k.style.top="0px";k.style.height="0px";k.style.width="0px";k.style.overflowY="scroll";q.style.height="2000px";k.appendChild(q);
document.body.appendChild(k);c.smooth=function(i){if(!arguments.length)return e;e=i;return c};c.zoom=function(i,t){if(!arguments.length)return a;a=i;f=t;if(j)a=="mouse"?j.on("move",d):j.off("move",d);return c};c.map=function(i){if(!arguments.length)return j;if(j){r.removeEventListener("mousemove",d,false);r.removeEventListener("mousewheel",g,false);r.removeEventListener("MozMousePixelScroll",g,false);r=null;j.off("move",d)}if(j=i){a=="mouse"&&j.on("move",d);r=j.container();r.addEventListener("mousemove",
d,false);r.addEventListener("mousewheel",g,false);r.addEventListener("MozMousePixelScroll",g,false)}return c};return c};v.arrow=function(){function d(u){if(!(u.ctrlKey||u.altKey||u.metaKey)){var w=Date.now(),z=0,E=0;switch(u.keyCode){case 37:if(!a.left){f=w;a.left=1;a.right||(z=k)}break;case 39:if(!a.right){f=w;a.right=1;a.left||(z=-k)}break;case 38:if(!a.up){f=w;a.up=1;a.down||(E=k)}break;case 40:if(!a.down){f=w;a.down=1;a.up||(E=-k)}break;default:return}if(z||E)i.panBy({x:z,y:E});if(!j&&a.left|
a.right|a.up|a.down)j=setInterval(l,q);u.preventDefault()}}function g(u){f=Date.now();switch(u.keyCode){case 37:a.left=0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(j&&!(a.left|a.right|a.up|a.down))j=clearInterval(j);u.preventDefault()}function c(u){switch(u.charCode){case 45:case 95:i.zoom(Math.ceil(i.zoom())-1);break;case 43:case 61:i.zoom(Math.floor(i.zoom())+1);break;default:return}u.preventDefault()}function l(){if(i)if(!(Date.now()<f+r)){var u=
(a.left-a.right)*k,w=(a.up-a.down)*k;if(u||w)i.panBy({x:u,y:w})}}var e={},a={left:0,right:0,up:0,down:0},f=0,j,r=250,q=50,k=16,i,t;e.map=function(u){if(!arguments.length)return i;if(i){t.removeEventListener("keypress",c,false);t.removeEventListener("keydown",d,false);t.removeEventListener("keyup",g,false);t=null}if(i=u){t=i.focusableParent();t.addEventListener("keypress",c,false);t.addEventListener("keydown",d,false);t.addEventListener("keyup",g,false)}return e};e.speed=function(u){if(!arguments.length)return k;
k=u;return e};return e};v.hash=function(){function d(){var j=f(e);if(l!==j)location.replace(l=j)}function g(){if(location.hash!==l)if(a(e,(l=location.hash).substring(1)))d()}var c={},l,e,a=function(j,r){var q=r.split("/").map(Number);if(q.length<3||q.some(isNaN))return true;else{var k=j.size();j.zoomBy(q[0]-j.zoom(),{x:k.x/2,y:k.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,q[1])),lon:q[2]})}},f=function(j){var r=j.center();j=j.zoom();var q=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));return"#"+
j.toFixed(2)+"/"+r.lat.toFixed(q)+"/"+r.lon.toFixed(q)};c.map=function(j){if(!arguments.length)return e;if(e){e.off("move",d);window.removeEventListener("hashchange",g,false)}if(e=j){e.on("move",d);window.addEventListener("hashchange",g,false);location.hash?g():d()}return c};c.parser=function(j){if(!arguments.length)return a;a=j;return c};c.formatter=function(j){if(!arguments.length)return f;f=j;return c};return c};v.touch=function(){function d(u,w){for(var z=-1,E=u.length;++z<E;){var y=u[z],F=y.identifier;
switch(w){case "start":k[F]={};k[F].start=k[F].current=a.mouse(y);break;case "current":if(k[F])k[F].current=a.mouse(y);break;case "finish":delete k[F];break}}i[w]=true;if(w==="current")t||(t=setTimeout(g,0))}function g(){if(i.start||i.finish){j=a.zoom();angle=a.angle();r=c("start")}i={};t=null;var u=c("current"),w=u.n>1?Math.log(u.r/r.r)/Math.LN2+j-a.zoom():0;u.n&&a.zoomBy(w,u,r.location);if(q&&"angle"in u){w=u.angle-r.angle;var z=a.center();a.center(u.location);a.angle(angle+w);a.center(z)}}function c(u){var w=
[],z;for(z in k)k[z][u]&&w.push(k[z][u]);if(w.length){z=0;for(var E=w.length,y={x:w[0].x,y:w[0].y};++z<E;){y.x+=w[z].x;y.y+=w[z].y}y.x/=E;y.y/=E;y.r=0;for(z=-1;++z<E;){var F=w[z].x-y.x,m=w[z].y-y.y;F=F*F+m*m;if(F>y.r)y.r=F}y.r=Math.sqrt(y.r);if(q&&E===2){F=w[1].x-w[0].x;m=w[1].y-w[0].y;y.angle=Math.atan2(m,F)}z=y}else z={};z=z;z.n=w.length;if(z&&(q||u!=="current"))z.location=a.pointLocation(z);return z}function l(u){function w(x){d(x.changedTouches,"current");x.preventDefault()}function z(x){d(x.changedTouches,
"finish");document.removeEventListener("touchmove",w,false);document.removeEventListener("touchend",z,false);document.removeEventListener("touchcancel",z,false);delete o.__polymaps_touch_listeners__}d(u.changedTouches,"start");for(var E={},y=-1,F=u.touches.length;++y<F;)E[u.touches[y].identifier]=true;for(var m in k)E[m]||delete k[m];var o=u.target;if(!o.__polymaps_touch_listeners__){document.addEventListener("touchmove",w,false);document.addEventListener("touchend",z,false);document.addEventListener("touchcancel",
z,false);o.__polymaps_touch_listeners__=true}}var e={},a,f,j,r,q,k={},i={},t=null;e.rotate=function(u){if(!arguments.length)return q;q=u;return e};e.map=function(u){if(!arguments.length)return a;if(a){f.removeEventListener("touchstart",l,false);f=null}if(a=u){f=a.container();f.addEventListener("touchstart",l,false)}return e};return e};v.interact=function(){var d={},g=v.drag(),c=v.wheel(),l=v.dblclick(),e=v.touch(),a=v.arrow();d.map=function(f){g.map(f);c.map(f);l.map(f);e.map(f);a.map(f);return d};
return d};v.compass=function(){function d(A){y.setAttribute("class","compass active");N||(N=setInterval(g,n));M&&H.panBy(M);x=Date.now();return k(A)}function g(){M&&Date.now()>x+h&&H.panBy(M)}function c(A){if(A.shiftKey){J={x0:H.mouse(A)};H.focusableParent().focus();return k(A)}}function l(A){if(J){J.x1=H.mouse(A);Q.setAttribute("x",Math.min(J.x0.x,J.x1.x));Q.setAttribute("y",Math.min(J.x0.y,J.x1.y));Q.setAttribute("width",Math.abs(J.x0.x-J.x1.x));Q.setAttribute("height",Math.abs(J.x0.y-J.x1.y));
Q.removeAttribute("display")}}function e(){y.setAttribute("class","compass");if(J){if(J.x1){H.extent([H.pointLocation({x:Math.min(J.x0.x,J.x1.x),y:Math.max(J.x0.y,J.x1.y)}),H.pointLocation({x:Math.max(J.x0.x,J.x1.x),y:Math.min(J.x0.y,J.x1.y)})]);Q.setAttribute("display","none")}J=null}if(N){clearInterval(N);N=0}}function a(A){return function(){A?this.setAttribute("class","active"):this.removeAttribute("class");M=A}}function f(A){return function(G){y.setAttribute("class","compass active");var I=H.zoom();
H.zoom(A<0?Math.ceil(I)-1:Math.floor(I)+1);return k(G)}}function j(A){return function(G){H.zoom(A);return k(G)}}function r(){this.setAttribute("class","active")}function q(){this.removeAttribute("class")}function k(A){A.stopPropagation();A.preventDefault();return false}function i(A){var G=Math.SQRT1_2*m,I=m*0.7,K=m*0.2,L=v.svg("g"),P=L.appendChild(v.svg("path")),W=L.appendChild(v.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d","M0,0L"+G+","+
G+"A"+m+","+m+" 0 0,1 "+-G+","+G+"Z");W.setAttribute("class","chevron");W.setAttribute("d","M"+K+","+(I-K)+"L0,"+I+" "+-K+","+(I-K));W.setAttribute("pointer-events","none");L.addEventListener("mousedown",d,false);L.addEventListener("mouseover",a(A),false);L.addEventListener("mouseout",a(null),false);L.addEventListener("dblclick",k,false);return L}function t(A){var G=m*0.4,I=G/2,K=v.svg("g"),L=K.appendChild(v.svg("path")),P=K.appendChild(v.svg("path")),W=K.appendChild(v.svg("path")),X=K.appendChild(v.svg("path"));
L.setAttribute("class","back");L.setAttribute("d","M"+-G+",0V"+-G+"A"+G+","+G+" 0 1,1 "+G+","+-G+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",L.getAttribute("d"));W.setAttribute("class","chevron");W.setAttribute("d","M"+-I+","+-G+"H"+I+(A>0?"M0,"+(-G-I)+"V"+-I:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",L.getAttribute("d"));K.addEventListener("mousedown",f(A),false);K.addEventListener("mouseover",r,false);K.addEventListener("mouseout",q,false);
K.addEventListener("dblclick",k,false);return K}function u(A){var G=m*0.2,I=m*0.4,K=v.svg("g"),L=K.appendChild(v.svg("rect")),P=K.appendChild(v.svg("path"));L.setAttribute("pointer-events","all");L.setAttribute("fill","none");L.setAttribute("x",-I);L.setAttribute("y",-0.75*I);L.setAttribute("width",2*I);L.setAttribute("height",1.5*I);P.setAttribute("class","chevron");P.setAttribute("d","M"+-G+",0H"+G);K.addEventListener("mousedown",j(A),false);K.addEventListener("dblclick",k,false);return K}function w(){var A=
m+6,G=A,I=H.size();switch(s){case "top-left":break;case "top-right":A=I.x-A;break;case "bottom-left":G=I.y-G;break;case "bottom-right":A=I.x-A;G=I.y-G;break}y.setAttribute("transform","translate("+A+","+G+")");Q.setAttribute("transform","translate("+-A+","+-G+")");for(var K in F)K==H.zoom()?F[K].setAttribute("class","active"):F[K].removeAttribute("class")}function z(){for(;y.lastChild;)y.removeChild(y.lastChild);y.appendChild(Q);if(B!="none"){T=y.appendChild(v.svg("g"));T.setAttribute("class","pan");
var A=T.appendChild(v.svg("circle"));A.setAttribute("class","back");A.setAttribute("r",m);T.appendChild(i({x:0,y:-o})).setAttribute("transform","rotate(0)");T.appendChild(i({x:o,y:0})).setAttribute("transform","rotate(90)");T.appendChild(i({x:0,y:o})).setAttribute("transform","rotate(180)");T.appendChild(i({x:-o,y:0})).setAttribute("transform","rotate(270)");A=T.appendChild(v.svg("circle"));A.setAttribute("fill","none");A.setAttribute("class","fore");A.setAttribute("r",m)}else T=null;if(C!="none"){D=
y.appendChild(v.svg("g"));D.setAttribute("class","zoom");A=-0.5;if(C=="big"){F={};var G=H.zoomRange()[0];for(A=0;G<=H.zoomRange()[1];G++,A++)(F[G]=D.appendChild(u(G))).setAttribute("transform","translate(0,"+-(A+0.75)*m*0.4+")")}G=B=="none"?0.4:2;D.setAttribute("transform","translate(0,"+m*(/^top-/.test(s)?G+(A+0.5)*0.4:-G)+")");D.appendChild(t(+1)).setAttribute("transform","translate(0,"+-(A+0.5)*m*0.4+")");D.appendChild(t(-1)).setAttribute("transform","scale(-1)")}else D=null;w()}var E={},y=v.svg("g"),
F={},m=30,o=16,x=0,h=250,n=50,s="top-left",C="small",D,B="small",N,M,T,J,Q=v.svg("rect"),H,R,O;y.setAttribute("class","compass");Q.setAttribute("class","back fore");Q.setAttribute("pointer-events","none");Q.setAttribute("display","none");E.radius=function(A){if(!arguments.length)return m;m=A;H&&z();return E};E.speed=function(A){if(!arguments.length)return m;o=A;return E};E.position=function(A){if(!arguments.length)return s;s=A;H&&z();return E};E.pan=function(A){if(!arguments.length)return B;B=A;H&&
z();return E};E.zoom=function(A){if(!arguments.length)return C;C=A;H&&z();return E};E.map=function(A){if(!arguments.length)return H;if(H){R.removeEventListener("mousedown",c,false);R.removeChild(y);R=null;O.removeEventListener("mousemove",l,false);O.removeEventListener("mouseup",e,false);O=null;H.off("move",w).off("resize",w)}if(H=A){R=H.container();R.appendChild(y);R.addEventListener("mousedown",c,false);O=R.ownerDocument.defaultView;O.addEventListener("mousemove",l,false);O.addEventListener("mouseup",
e,false);H.on("move",w).on("resize",w);z()}return E};return E};v.grid=function(){function d(){var e=l.firstChild,a=c.size(),f=c.pointLocation($);c.pointLocation(a);var j=Math.pow(2,4-Math.round(c.zoom()));f.lat=Math.floor(f.lat/j)*j;f.lon=Math.ceil(f.lon/j)*j;for(var r;(r=c.locationPoint(f).x)<=a.x;f.lon+=j){e||(e=l.appendChild(v.svg("line")));e.setAttribute("x1",r);e.setAttribute("x2",r);e.setAttribute("y1",0);e.setAttribute("y2",a.y);e=e.nextSibling}for(;(r=c.locationPoint(f).y)<=a.y;f.lat-=j){e||
(e=l.appendChild(v.svg("line")));e.setAttribute("y1",r);e.setAttribute("y2",r);e.setAttribute("x1",0);e.setAttribute("x2",a.x);e=e.nextSibling}for(;e;){a=e.nextSibling;l.removeChild(e);e=a}}var g={},c,l=v.svg("g");l.setAttribute("class","grid");g.map=function(e){if(!arguments.length)return c;if(c){l.parentNode.removeChild(l);c.off("move",d).off("resize",d)}if(c=e){c.on("move",d).on("resize",d);c.container().appendChild(l);c.dispatch({type:"move"})}return g};return g};v.stylist=function(){function d(e){var a=
e.features.length,f=g.length,j=c.length,r,q,k,i,t,u;for(t=0;t<a;++t)if(q=(r=e.features[t]).element){r=r.data;for(u=0;u<f;++u){i=(k=g[u]).value;if(typeof i==="function")i=i.call(null,r);i==null?k.name.local?q.removeAttributeNS(k.name.space,k.name.local):q.removeAttribute(k.name):k.name.local?q.setAttributeNS(k.name.space,k.name.local,i):q.setAttribute(k.name,i)}for(u=0;u<j;++u){i=(k=c[u]).value;if(typeof i==="function")i=i.call(null,r);i==null?q.style.removeProperty(k.name):q.style.setProperty(k.name,
i,k.priority)}if(i=l){if(typeof i==="function")i=i.call(null,r);for(;q.lastChild;)q.removeChild(q.lastChild);i!=null&&q.appendChild(v.svg("title")).appendChild(document.createTextNode(i))}}}var g=[],c=[],l;d.attr=function(e,a){g.push({name:ha(e),value:a});return d};d.style=function(e,a,f){c.push({name:e,value:a,priority:arguments.length<3?null:f});return d};d.title=function(e){l=e;return d};return d}})(org.polymaps);
