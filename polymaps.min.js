if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(v){function ha(d){var g=d.indexOf(":");return g<0?d:{space:v.ns[d.substring(0,g)],local:d.substring(g+1)}}function S(){for(var d=0;d<S.maps.length;d++)S.maps[d].resize()}function Y(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function Z(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function aa(d,g){if(d.row>g.row){var c=d;d=g;g=c}return{x0:d.column,y0:d.row,x1:g.column,y1:g.row,dx:g.column-d.column,dy:g.row-d.row}}function ea(d,g,c,n,e){c=Math.max(c,Math.floor(g.y0));
n=Math.min(n,Math.ceil(g.y1));if(d.x0==g.x0&&d.y0==g.y0?d.x0+g.dy/d.dy*d.dx<g.x1:d.x1-g.dy/d.dy*d.dx<g.x0){var a=d;d=g;g=a}a=d.dx/d.dy;var f=g.dx/g.dy,h=d.dx>0,r=g.dx<0;for(c=c;c<n;c++){var l=a*Math.max(0,Math.min(d.dy,c+h-d.y0))+d.x0;e(Math.floor(f*Math.max(0,Math.min(g.dy,c+r-g.y0))+g.x0),Math.ceil(l),c)}}function fa(d,g,c,n,e,a){var f=aa(d,g);g=aa(g,c);d=aa(c,d);if(f.dy>g.dy){c=f;f=g;g=c}if(f.dy>d.dy){c=f;f=d;d=c}if(g.dy>d.dy){c=g;g=d;d=c}f.dy&&ea(d,f,n,e,a);g.dy&&ea(d,g,n,e,a)}v.version="2.5.1";
var $={x:0,y:0};v.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};v.id=function(){var d=0;return function(){return++d}}();v.svg=function(d){return document.createElementNS(v.ns.svg,d)};v.transform=function(d,g,c,n,e,a){var f={},h,r,l;if(!arguments.length){d=1;g=e=c=0;n=1;a=0}f.zoomFraction=function(j){if(!arguments.length)return r;r=j;h=Math.floor(r+Math.log(Math.sqrt(d*d+g*g+c*c+n*n))/Math.LN2);l=Math.pow(2,-h);return f};f.apply=function(j){var k=Math.pow(2,-j.zoom),u=
Math.pow(2,j.zoom-h);return{column:(d*j.column*k+c*j.row*k+e)*u,row:(g*j.column*k+n*j.row*k+a)*u,zoom:j.zoom-h}};f.unapply=function(j){var k=Math.pow(2,-j.zoom),u=Math.pow(2,j.zoom+h);return{column:(j.column*k*n-j.row*k*c-e*n+a*c)/(d*n-g*c)*u,row:(j.column*k*g-j.row*k*d-e*g+a*d)/(c*g-n*d)*u,zoom:j.zoom+h}};f.toString=function(){return"matrix("+[d*l,g*l,c*l,n*l].join(" ")+" 0 0)"};return f.zoomFraction(0)};v.cache=function(d,g){function c(k){j--;g&&g(k);delete f[k.key];if(k.next)k.next.prev=k.prev;
else if(r=k.prev)r.next=null;if(k.prev)k.prev.next=k.next;else if(h=k.next)h.prev=null}function n(){for(var k=r;j>l;k=k.prev){if(!k)break;k.lock||c(k)}}var e={},a={},f={},h=null,r=null,l=64,j=0;e.peek=function(k){return f[[k.zoom,k.column,k.row].join("/")]};e.load=function(k,u){var s=[k.zoom,k.column,k.row].join("/"),w=f[s];if(w){if(w.prev){if(w.prev.next=w.next)w.next.prev=w.prev;else r=w.prev;w.prev=null;w.next=h;h=h.prev=w}w.lock=1;return a[s]=w}w={key:s,column:k.column,row:k.row,zoom:k.zoom,next:h,
prev:null,lock:1};d.call(null,w,u);a[s]=f[s]=w;if(h)h.prev=w;else r=w;h=w;j++;return w};e.unload=function(k){if(!(k in a))return false;var u=a[k];u.lock=0;delete a[k];u.request&&u.request.abort(false)&&c(u);return u};e.locks=function(){return a};e.size=function(k){if(!arguments.length)return l;l=k;n();return e};e.flush=function(){n();return e};e.clear=function(){for(var k in f){var u=f[k];u.request&&u.request.abort(false);g&&g(f[k]);if(u.lock){u.lock=0;u.element.parentNode.removeChild(u.element)}}a=
{};f={};h=r=null;j=0;return e};return e};v.url=function(d){function g(e){var a=e.zoom<0?1:1<<e.zoom,f=e.column;if(n){f=e.column%a;if(f<0)f+=a}else if(f<0||f>=a)return null;return d.replace(/{(.)}/g,function(h,r){switch(r){case "S":return c[(Math.abs(e.zoom)+e.row+f)%c.length];case "Z":return e.zoom;case "X":return f;case "Y":return e.row;case "B":var l=v.map.coordinateLocation({row:e.row,column:f,zoom:e.zoom}),j=v.map.coordinateLocation({row:e.row+1,column:f+1,zoom:e.zoom}),k=Math.ceil(Math.log(e.zoom)/
Math.LN2);return j.lat.toFixed(k)+","+l.lon.toFixed(k)+","+l.lat.toFixed(k)+","+j.lon.toFixed(k)}return r})}var c=[],n=true;g.template=function(e){if(!arguments.length)return d;d=e;return g};g.hosts=function(e){if(!arguments.length)return c;c=e;return g};g.repeat=function(e){if(!arguments.length)return n;n=e;return g};return g};v.dispatch=function(d){var g={};d.on=function(c,n){for(var e=g[c]||(g[c]=[]),a=0;a<e.length;a++)if(e[a].handler==n)return d;e.push({handler:n,on:true});return d};d.off=function(c,
n){var e=g[c];if(e)for(var a=0;a<e.length;a++){var f=e[a];if(f.handler==n){f.on=false;e.splice(a,1);break}}return d};return function(c){var n=g[c.type];if(n){n=n.slice();for(var e=0;e<n.length;e++){var a=n[e];a.on&&a.handler.call(d,c)}}}};v.queue=function(){function d(){if(!(e>=a||!n.length)){e++;n.pop()()}}function g(f){for(var h=0;h<n.length;h++)if(n[h]==f){n.splice(h,1);return true}return false}function c(f,h,r){function l(){j=new XMLHttpRequest;r&&j.overrideMimeType&&j.overrideMimeType(r);j.open("GET",
f,true);j.onreadystatechange=function(){if(j.readyState==4){e--;j.status<300&&h(j);d()}};j.send(null)}var j;n.push(l);d();return{abort:function(k){if(g(l))return true;if(k&&j){j.abort();return true}return false}}}var n=[],e=0,a=6;return{text:function(f,h,r){return c(f,function(l){l.responseText&&h(l.responseText)},r)},xml:function(f,h){return c(f,function(r){r.responseXML&&h(r.responseXML)},"application/xml")},json:function(f,h){return c(f,function(r){r.responseText&&h(JSON.parse(r.responseText))},
"application/json")},image:function(f,h,r){function l(){j=document.createElement("img");j.onerror=function(){e--;d()};j.onload=function(){e--;r(j);d()};j.src=h;f.setAttributeNS(v.ns.xlink,"href",h)}var j;n.push(l);d();return{abort:function(k){if(g(l))return true;if(k&&j){j.src="about:";return true}return false}}}}}();(function(){var d=!!window.ActiveXObject,g=d&&!window.XMLHttpRequest,c=d&&!document.querySelector,n=navigator.userAgent.toLowerCase(),e=n.indexOf("webkit")!==-1,a=n.indexOf("chrome")!==
-1,f=n.indexOf("android")!==-1;n=n.search("android [23]")!==-1;var h=typeof orientation!=="undefined",r=window.navigator&&window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints,l="devicePixelRatio"in window&&window.devicePixelRatio>1||"matchMedia"in window&&window.matchMedia("(min-resolution:144dpi)")&&window.matchMedia("(min-resolution:144dpi)").matches,j=document.documentElement,k=d&&"transition"in j.style,u="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix,s="MozPerspective"in
j.style,w="OTransition"in j.style,z=!window.P_DISABLE_3D&&(k||u||s||w),E=!window.P_NO_TOUCH&&function(){if(r||"ontouchstart"in j)return true;var y=document.createElement("div"),F=false;if(!y.setAttribute)return false;y.setAttribute("ontouchstart","return;");if(typeof y.ontouchstart==="function")F=true;y.removeAttribute("ontouchstart");return F}();v.browser={ie:d,ie6:g,ie7:c,webkit:e,android:f,android23:n,chrome:a,ie3d:k,webkit3d:u,gecko3d:s,opera3d:w,any3d:z,mobile:h,mobileWebkit:h&&e,mobileWebkit3d:h&&
u,mobileOpera:h&&window.opera,touch:E,msTouch:r,retina:l}})();v.map=function(){function d(){if(u)if(l<u[0])l=u[0];else if(l>u[1])l=u[1];j=l-(l=Math.round(l));k=Math.pow(2,j)}function g(){if(q){var i=45/Math.pow(2,l+j-3),o=Math.max(Math.abs(z*f.x+w*f.y),Math.abs(y*f.x+E*f.y)),t=Y(F-o*i/h.y);o=Y(m+o*i/h.y);r.lat=Math.max(t,Math.min(o,r.lat));t=Math.max(Math.abs(z*f.y+w*f.x),Math.abs(y*f.y+E*f.x));r.lon=Math.max(q[0].lon-t*i/h.x,Math.min(q[1].lon+t*i/h.x,r.lon))}}var c={},n,e,a=$,f=$,h={x:256,y:256},
r={lat:37.76487,lon:-122.41948},l=12,j=0,k=1,u=[1,18],s=0,w=1,z=0,E=1,y=0,F=-180,m=180,q=[{lat:Y(F),lon:-Infinity},{lat:Y(m),lon:Infinity}];c.locationCoordinate=function(i){i=v.map.locationCoordinate(i);var o=Math.pow(2,l);i.column*=o;i.row*=o;i.zoom+=l;return i};c.coordinateLocation=v.map.coordinateLocation;c.coordinatePoint=function(i,o){var t=Math.pow(2,l-o.zoom),C=Math.pow(2,l-i.zoom),D=(o.column*t-i.column*C)*h.x*k;t=(o.row*t-i.row*C)*h.y*k;return{x:f.x+w*D-z*t,y:f.y+z*D+w*t}};c.pointCoordinate=
function(i,o){var t=Math.pow(2,l-i.zoom),C=(o.x-f.x)/k,D=(o.y-f.y)/k;return{column:i.column*t+(E*C-y*D)/h.x,row:i.row*t+(y*C+E*D)/h.y,zoom:l}};c.locationPoint=function(i){var o=Math.pow(2,l+j-3)/45,t=(i.lon-r.lon)*o*h.x;i=(Z(r.lat)-Z(i.lat))*o*h.y;return{x:f.x+w*t-z*i,y:f.y+z*t+w*i}};c.pointLocation=function(i){var o=45/Math.pow(2,l+j-3),t=(i.x-f.x)*o;i=(i.y-f.y)*o;return{lon:r.lon+(E*t-y*i)/h.x,lat:Y(Z(r.lat)-(y*t+E*i)/h.y)}};var x=v.svg("rect");x.setAttribute("visibility","hidden");x.setAttribute("pointer-events",
"all");c.container=function(i){if(!arguments.length)return n;n=i;n.setAttribute("class","map");n.appendChild(x);return c.resize()};c.focusableParent=function(){for(var i=n;i;i=i.parentNode)if(i.tabIndex>=0)return i;return window};c.mouse=function(i){var o=(n.ownerSVGElement||n).createSVGPoint();if(ba<0&&(window.scrollX||window.scrollY)){var t=document.body.appendChild(v.svg("svg"));t.style.position="absolute";t.style.top=t.style.left="0px";var C=t.getScreenCTM();ba=!(C.f||C.e);document.body.removeChild(t)}if(ba){o.x=
i.pageX;o.y=i.pageY}else{o.x=i.clientX;o.y=i.clientY}return o.matrixTransform(n.getScreenCTM().inverse())};c.size=function(i){if(!arguments.length)return a;e=i;return c.resize()};c.resize=function(){if(e){a=e;S.remove(c)}else{x.setAttribute("width","100%");x.setAttribute("height","100%");b=x.getBBox();a={x:b.width,y:b.height};S.add(c)}x.setAttribute("width",a.x);x.setAttribute("height",a.y);f={x:a.x/2,y:a.y/2};g();c.dispatch({type:"resize"});return c};c.tileSize=function(i){if(!arguments.length)return h;
h=i;c.dispatch({type:"move"});return c};c.center=function(i){if(!arguments.length)return r;r=i;g();c.dispatch({type:"move"});return c};c.panBy=function(i){var o=45/Math.pow(2,l+j-3),t=i.x*o;i=i.y*o;return c.center({lon:r.lon+(y*i-E*t)/h.x,lat:Y(Z(r.lat)+(y*t+E*i)/h.y)})};c.centerRange=function(i){if(!arguments.length)return q;if(q=i){F=q[0].lat>-90?Z(q[0].lat):-Infinity;m=q[0].lat<90?Z(q[1].lat):Infinity}else{F=-Infinity;m=Infinity}g();c.dispatch({type:"move"});return c};c.zoom=function(i){if(!arguments.length)return l+
j;l=i;d();return c.center(r)};c.zoomBy=function(i,o,t){if(arguments.length<2)return c.zoom(l+j+i);if(arguments.length<3)t=c.pointLocation(o);l=l+j+i;d();var C=c.locationPoint(t);return c.panBy({x:o.x-C.x,y:o.y-C.y})};c.zoomRange=function(i){if(!arguments.length)return u;u=i;return c.zoom(l+j)};c.extent=function(i){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,y:0})];var o=c.locationPoint(i[0]),t=c.locationPoint(i[1]),C=Math.max((t.x-o.x)/a.x,(o.y-t.y)/a.y);o=c.pointLocation({x:(o.x+
t.x)/2,y:(o.y+t.y)/2});l=l+j-Math.log(C)/Math.LN2;d();return c.center(o)};c.angle=function(i){if(!arguments.length)return s;s=i;w=Math.cos(s);z=Math.sin(s);E=Math.cos(-s);y=Math.sin(-s);g();c.dispatch({type:"move"});return c};c.add=function(i){i.map(c);return c};c.remove=function(i){i.map(null);return c};c.dispatch=v.dispatch(c);return c};S.maps=[];S.add=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==d)return;S.maps.push(d)};S.remove=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==
d){S.maps.splice(g,1);return}};if(window.addEventListener){window.addEventListener("resize",S,false);window.addEventListener("load",S,false)}v.map.locationCoordinate=function(d){var g=1/360;return{column:(d.lon+180)*g,row:(180-Z(d.lat))*g,zoom:0}};v.map.coordinateLocation=function(d){var g=45/Math.pow(2,d.zoom-3);return{lon:g*d.column-180,lat:Y(180-g*d.row)}};var ba=/WebKit/.test(navigator.userAgent)?-1:0;v.layer=function(d,g){function c(y){for(var F=z[0].nextSibling;w<y;w++){u.insertBefore(z[-4],
F);u.insertBefore(z[2],F);u.insertBefore(z[1],F);for(var m=z[-4],q=-4;q<2;)z[q]=z[++q];z[q]=m}}function n(y){for(var F=z[0].nextSibling;w>y;w--){u.insertBefore(z[-1],F);u.insertBefore(z[2],z[-4]);for(var m=z[2],q=2;q>-4;)z[q]=z[--q];z[q]=m}}function e(){function y(O){var A=O.zoom,G=A<0?1:1<<A,I=O.column%G,K=O.row;if(I<0)I+=G;return{locationPoint:function(L){L=v.map.locationCoordinate(L);var P=Math.pow(2,A-L.zoom);return{x:C.x*(P*L.column-I),y:C.y*(P*L.row-K)}}}}function F(O,A,G){var I=M.zoom,K=2-
Q,L=4+Q;for(O=O;O<A;O++){var P=f.load({column:O,row:G,zoom:I},y);if(!P.ready&&!(P.key in H)){P.proxyRefs={};for(var W,X,U,V=1;V<=K;V++){X=true;for(var ca=0,ga=1<<V;ca<=ga;ca++)for(var da=0;da<=ga;da++)if((U=f.peek(W={column:(O<<V)+da,row:(G<<V)+ca,zoom:I+V}))&&U.ready){H[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U}else X=false;if(X)break}if(!X)for(V=1;V<=L;V++)if((U=f.peek(W={column:O>>V,row:G>>V,zoom:I-V}))&&U.ready){H[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U;break}}H[P.key]=
P}}function m(O){return Math.round(O*256)/256}var q=a.map(),x=q.zoom(),i=x-(x=Math.round(x)),o=q.size(),t=q.angle(),C=q.tileSize(),D=q.locationCoordinate(q.center());if(w!=x){if(w<x)c(x);else if(w>x)n(x);else w=x;for(var B=-4;B<=2;B++){var N=z[B];N.setAttribute("class","zoom"+(B<0?"":"+")+B+" zoom"+(x+B));N.setAttribute("transform","scale("+Math.pow(2,-B)+")")}}var M=q.pointCoordinate(D,$);B=q.pointCoordinate(D,{x:o.x,y:0});x=q.pointCoordinate(D,o);q=q.pointCoordinate(D,{x:0,y:o.y});N=D.column;var T=
D.row;D.column=Math.round((Math.round(C.x*D.column)+(o.x&1)/2)/C.x);D.row=Math.round((Math.round(C.y*D.row)+(o.y&1)/2)/C.y);N-=D.column;T-=D.row;var J=m(Math.pow(2,i));u.setAttribute("transform","translate("+Math.round(o.x/2-N*C.x*J)+","+Math.round(o.y/2-T*C.y*J)+")"+(t?"rotate("+t/Math.PI*180+")":"")+(i?"scale("+J+")":"")+(s?s.zoomFraction(i):""));if(s){M=s.unapply(M);B=s.unapply(B);x=s.unapply(x);q=s.unapply(q);D=s.unapply(D)}var Q=l?l(M.zoom)-M.zoom:0;if(Q){o=Math.pow(2,Q);M.column*=o;M.row*=o;
B.column*=o;B.row*=o;x.column*=o;x.row*=o;q.column*=o;q.row*=o;M.zoom=B.zoom=x.zoom=q.zoom+=Q}i=f.locks();var H={};for(var R in i)i[R].proxyCount=0;if(r&&Q>-5&&Q<3){t=M.zoom<0?1:1<<M.zoom;if(h){fa(M,B,x,0,t,F);fa(x,q,M,0,t,F)}else{o=Math.floor((M.column+x.column)/2);t=Math.max(0,Math.min(t-1,Math.floor((B.row+q.row)/2)));B=Math.min(4,M.zoom);o=o>>B<<B;t=t>>B<<B;F(o,o+1,t)}}for(R in H){B=H[R];o=m(Math.pow(2,B.level=B.zoom-D.zoom));B.element.setAttribute("transform","translate("+Math.round(B.x=C.x*
(B.column-D.column*o))+","+Math.round(B.y=C.y*(B.row-D.row*o))+")")}for(R in i)if(!(R in H)){B=f.unload(R);B.element.parentNode.removeChild(B.element);delete B.proxyRefs}for(R in H){B=H[R];if(B.element.parentNode!=z[B.level]){z[B.level].appendChild(B.element);a.show&&a.show(B)}}f.flush();a.dispatch({type:"move"})}var a={},f=a.cache=v.cache(d,g).size(512),h=true,r=true,l,j,k,u=v.svg("g"),s,w,z={};u.setAttribute("class","layer");for(var E=-4;E<=-1;E++)z[E]=u.appendChild(v.svg("g"));for(E=2;E>=1;E--)z[E]=
u.appendChild(v.svg("g"));z[0]=u.appendChild(v.svg("g"));a.map=function(y){if(!arguments.length)return k;if(k){if(k==y){u.parentNode.appendChild(u);return a}k.off("move",e).off("resize",e);u.parentNode.removeChild(u)}if(k=y){k.container().appendChild(u);a.init&&a.init(u);k.on("move",e).on("resize",e);e()}return a};a.container=function(){return u};a.levels=function(){return z};a.id=function(y){if(!arguments.length)return j;j=y;u.setAttribute("id",y);return a};a.visible=function(y){if(!arguments.length)return r;
(r=y)?u.removeAttribute("visibility"):u.setAttribute("visibility","hidden");k&&e();return a};a.transform=function(y){if(!arguments.length)return s;s=y;k&&e();return a};a.zoom=function(y){if(!arguments.length)return l;l=typeof y=="function"||y==null?y:function(){return y};k&&e();return a};a.tile=function(y){if(!arguments.length)return h;h=y;k&&e();return a};a.reload=function(){f.clear();k&&e();return a};a.dispatch=v.dispatch(a);a.on("load",function(y){if(y.tile.proxyRefs){for(var F in y.tile.proxyRefs){var m=
y.tile.proxyRefs[F];--m.proxyCount<=0&&f.unload(F)&&m.element.parentNode.removeChild(m.element)}delete y.tile.proxyRefs}});return a};v.image=function(){var d=v.layer(function(c){var n=c.element=v.svg("image"),e=d.map().tileSize();n.setAttribute("preserveAspectRatio","none");n.setAttribute("width",e.x);n.setAttribute("height",e.y);if(typeof g=="function"){n.setAttribute("opacity",0);e=g(c);if(e!=null)c.request=v.queue.image(n,e,function(a){delete c.request;c.ready=true;c.img=a;n.removeAttribute("opacity");
d.dispatch({type:"load",tile:c})});else{c.ready=true;d.dispatch({type:"load",tile:c})}}else{c.ready=true;g!=null&&n.setAttributeNS(v.ns.xlink,"href",g);d.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),g;d.url=function(c){if(!arguments.length)return g;g=typeof c=="string"&&/{.}/.test(c)?v.url(c):c;return d.reload()};return d};v.geoJson=function(d){function g(m){var q={lat:0,lon:0};return function(x){q.lat=x[1];q.lon=x[0];var i=m(q);x.x=i.x;x.y=i.y;return i}}function c(m,
q){return m&&m.type in z&&z[m.type](m,q)}function n(m,q,x){return m.type in E&&E[m.type](m,q,x)}function e(){var m=a.map().zoom(),q=a.cache.locks(),x,i,o,t,C,D,B;if(s=="fixed")for(x in q){if((i=q[x]).scale!=m){B="scale("+Math.pow(2,i.zoom-m)+")";t=-1;for(C=(o=i.features).length;++t<C;)n((D=o[t]).data.geometry,D.element,B);i.scale=m}}else for(x in q){t=-1;for(C=(o=(i=q[x]).features).length;++t<C;)n((D=o[t]).data.geometry,D.element,"");delete i.scale}}var a=v.layer(function(m,q){function x(o){var t=
[];if(o.next)m.request=d(o.next.href,x);switch(o.type){case "FeatureCollection":for(var C=0;C<o.features.length;C++){var D=o.features[C],B=c(D.geometry,q);B&&t.push({element:i.appendChild(B),data:D})}break;case "Feature":(B=c(o.geometry,q))&&t.push({element:i.appendChild(B),data:o});break;default:(B=c(o,q))&&t.push({element:i.appendChild(B),data:{type:"Feature",geometry:o}});break}m.ready=true;t.push.apply(m.features,t);a.dispatch({type:"load",tile:m,features:t})}var i=m.element=v.svg("g");m.features=
[];q=g(q(m).locationPoint);if(h!=null)m.request=d(typeof h=="function"?h(m):h,x);else x({type:"FeatureCollection",features:w||[]})},function(m){m.request&&m.request.abort(true)}),f=a.container(),h,r=true,l="org.polymaps."+v.id(),j="url(#"+l+")",k=f.insertBefore(v.svg("clipPath"),f.firstChild),u=k.appendChild(v.svg("rect")),s="auto",w;f.setAttribute("fill-rule","evenodd");k.setAttribute("id",l);if(!arguments.length)d=v.queue.json;var z={Point:function(m,q){var x=q(m.coordinates),i=v.svg("circle");
i.setAttribute("r",4.5);i.setAttribute("transform","translate("+x.x+","+x.y+")");return i},MultiPoint:function(m,q){for(var x=v.svg("g"),i=m.coordinates,o,t,C=-1,D=i.length;++C<D;){t=x.appendChild(v.svg("circle"));t.setAttribute("r",4.5);t.setAttribute("transform","translate("+(o=q(i[C])).x+","+o.y+")")}return x},LineString:function(m,q){for(var x=v.svg("path"),i=["M"],o=m.coordinates,t,C=-1,D=o.length;++C<D;)i.push((t=q(o[C])).x,",",t.y,"L");i.pop();if(i.length){x.setAttribute("d",i.join(""));return x}},
MultiLineString:function(m,q){for(var x=v.svg("path"),i=[],o=m.coordinates,t,C=-1,D,B=o.length,N;++C<B;){t=o[C];D=-1;N=t.length;for(i.push("M");++D<N;)i.push((p=q(t[D])).x,",",p.y,"L");i.pop()}if(i.length){x.setAttribute("d",i.join(""));return x}},Polygon:function(m,q){for(var x=v.svg("path"),i=[],o=m.coordinates,t,C=-1,D,B=o.length,N;++C<B;){t=o[C];D=-1;N=t.length-1;for(i.push("M");++D<N;)i.push((p=q(t[D])).x,",",p.y,"L");i[i.length-1]="Z"}if(i.length){x.setAttribute("d",i.join(""));return x}},MultiPolygon:function(m,
q){for(var x=v.svg("path"),i=[],o=m.coordinates,t,C,D=-1,B,N,M=o.length,T,J;++D<M;){t=o[D];B=-1;for(T=t.length;++B<T;){C=t[B];N=-1;J=C.length-1;for(i.push("M");++N<J;)i.push((p=q(C[N])).x,",",p.y,"L");i[i.length-1]="Z"}}if(i.length){x.setAttribute("d",i.join(""));return x}},GeometryCollection:function(m,q){for(var x=v.svg("g"),i=-1,o=m.geometries,t=o.length,C;++i<t;)(C=c(o[i],q))&&x.appendChild(C);return x}},E={Point:function(m,q,x){m=m.coordinates;q.setAttribute("transform","translate("+m.x+","+
m.y+")"+x)},MultiPoint:function(m,q,x){m=m.coordinates;var i=-1,o=t.length;q=q.firstChild;for(var t;++i<o;){t=m[i];q.setAttribute("transform","translate("+t.x+","+t.y+")"+x);q=q.nextSibling}}};a.url=function(m){if(!arguments.length)return h;h=typeof m=="string"&&/{.}/.test(m)?v.url(m):m;if(h!=null)w=null;typeof h=="string"&&a.tile(false);return a.reload()};a.features=function(m){if(!arguments.length)return w;if(w=m){h=null;a.tile(false)}return a.reload()};a.clip=function(m){if(!arguments.length)return r;
r&&f.removeChild(k);if(r=m)f.insertBefore(k,f.firstChild);var q=a.cache.locks();for(var x in q)r?q[x].element.setAttribute("clip-path",j):q[x].element.removeAttribute("clip-path");return a};var y=a.tile;a.tile=function(m){arguments.length&&!m&&a.clip(m);return y.apply(a,arguments)};var F=a.map;a.map=function(m){if(m&&u){var q=m.tileSize();u.setAttribute("width",q.x);u.setAttribute("height",q.y)}return F.apply(a,arguments)};a.scale=function(m){if(!arguments.length)return s;(s=m)?a.on("move",e):a.off("move",
e);a.map()&&e();return a};a.show=function(m){r?m.element.setAttribute("clip-path",j):m.element.removeAttribute("clip-path");a.dispatch({type:"show",tile:m,features:m.features});return a};a.reshow=function(){var m=a.cache.locks();for(var q in m)a.show(m[q]);return a};return a};v.dblclick=function(){function d(a){var f=n.zoom();f=a.shiftKey?Math.ceil(f)-f-1:1-f+Math.floor(f);c==="mouse"?n.zoomBy(f,n.mouse(a)):n.zoomBy(f)}var g={},c="mouse",n,e;g.zoom=function(a){if(!arguments.length)return c;c=a;return g};
g.map=function(a){if(!arguments.length)return n;if(n){e.removeEventListener("dblclick",d,false);e=null}if(n=a){e=n.container();e.addEventListener("dblclick",d,false)}return g};return g};v.drag=function(){function d(l){if(!l.shiftKey)if(!(l.touches&&l.touches.length>1)){var j=l.touches&&l.touches.length===1?l.touches[0]:l;f={x:j.clientX,y:j.clientY};e.focusableParent().focus();l.preventDefault();document.body.style.setProperty("cursor","move",null)}}function g(l){if(f)if(!(l.touches&&l.touches.length>
1)){l=l.touches&&l.touches.length===1?l.touches[0]:l;e.panBy({x:l.clientX-f.x,y:l.clientY-f.y});f.x=l.clientX;f.y=l.clientY}}function c(l){if(f){l.touches||g(l);f=null;document.body.style.removeProperty("cursor")}}var n={},e,a,f,h={START:v.browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove"}};n.map=function(l){if(!arguments.length)return e;if(e){for(var j=h.START.length-1;j>=0;j--)a.removeEventListener(h.START[j],
d,false);a=null}if(e=l){a=e.container();for(j=h.START.length-1;j>=0;j--)a.addEventListener(h.START[j],d,false)}return n};for(var r=h.START.length-1;r>=0;r--){document.addEventListener(h.MOVE[h.START[r]],g,false);document.addEventListener(h.END[h.START[r]],c,false)}return n};v.wheel=function(){function d(){f=null}function g(k){var u=k.wheelDelta||-k.detail,s;if(u)if(e){try{j.scrollTop=1E3;j.dispatchEvent(k);u=1E3-j.scrollTop}catch(w){}u*=0.0050}else{s=Date.now();if(s-n>200){u=u>0?+1:-1;n=s}else u=
0}if(u)switch(a){case "mouse":s=h.mouse(k);f||(f=h.pointLocation(s));h.off("move",d).zoomBy(u,s,f).on("move",d);break;case "location":h.zoomBy(u,h.locationPoint(f),f);break;default:h.zoomBy(u);break}k.preventDefault();return false}var c={},n=0,e=true,a="mouse",f,h,r,l=document.createElement("div"),j=document.createElement("div");j.style.visibility="hidden";j.style.top="0px";j.style.height="0px";j.style.width="0px";j.style.overflowY="scroll";l.style.height="2000px";j.appendChild(l);document.body.appendChild(j);
c.smooth=function(k){if(!arguments.length)return e;e=k;return c};c.zoom=function(k,u){if(!arguments.length)return a;a=k;f=u;if(h)a=="mouse"?h.on("move",d):h.off("move",d);return c};c.map=function(k){if(!arguments.length)return h;if(h){r.removeEventListener("mousemove",d,false);r.removeEventListener("mousewheel",g,false);r.removeEventListener("MozMousePixelScroll",g,false);r=null;h.off("move",d)}if(h=k){a=="mouse"&&h.on("move",d);r=h.container();r.addEventListener("mousemove",d,false);r.addEventListener("mousewheel",
g,false);r.addEventListener("MozMousePixelScroll",g,false)}return c};return c};v.arrow=function(){function d(s){if(!(s.ctrlKey||s.altKey||s.metaKey)){var w=Date.now(),z=0,E=0;switch(s.keyCode){case 37:if(!a.left){f=w;a.left=1;a.right||(z=j)}break;case 39:if(!a.right){f=w;a.right=1;a.left||(z=-j)}break;case 38:if(!a.up){f=w;a.up=1;a.down||(E=j)}break;case 40:if(!a.down){f=w;a.down=1;a.up||(E=-j)}break;default:return}if(z||E)k.panBy({x:z,y:E});if(!h&&a.left|a.right|a.up|a.down)h=setInterval(n,l);s.preventDefault()}}
function g(s){f=Date.now();switch(s.keyCode){case 37:a.left=0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(h&&!(a.left|a.right|a.up|a.down))h=clearInterval(h);s.preventDefault()}function c(s){switch(s.charCode){case 45:case 95:k.zoom(Math.ceil(k.zoom())-1);break;case 43:case 61:k.zoom(Math.floor(k.zoom())+1);break;default:return}s.preventDefault()}function n(){if(k)if(!(Date.now()<f+r)){var s=(a.left-a.right)*j,w=(a.up-a.down)*j;if(s||w)k.panBy({x:s,
y:w})}}var e={},a={left:0,right:0,up:0,down:0},f=0,h,r=250,l=50,j=16,k,u;e.map=function(s){if(!arguments.length)return k;if(k){u.removeEventListener("keypress",c,false);u.removeEventListener("keydown",d,false);u.removeEventListener("keyup",g,false);u=null}if(k=s){u=k.focusableParent();u.addEventListener("keypress",c,false);u.addEventListener("keydown",d,false);u.addEventListener("keyup",g,false)}return e};e.speed=function(s){if(!arguments.length)return j;j=s;return e};return e};v.hash=function(){function d(){var h=
f(e);if(n!==h)location.replace(n=h)}function g(){if(location.hash!==n)if(a(e,(n=location.hash).substring(1)))d()}var c={},n,e,a=function(h,r){var l=r.split("/").map(Number);if(l.length<3||l.some(isNaN))return true;else{var j=h.size();h.zoomBy(l[0]-h.zoom(),{x:j.x/2,y:j.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,l[1])),lon:l[2]})}},f=function(h){var r=h.center();h=h.zoom();var l=Math.max(0,Math.ceil(Math.log(h)/Math.LN2));return"#"+h.toFixed(2)+"/"+r.lat.toFixed(l)+"/"+r.lon.toFixed(l)};
c.map=function(h){if(!arguments.length)return e;if(e){e.off("move",d);window.removeEventListener("hashchange",g,false)}if(e=h){e.on("move",d);window.addEventListener("hashchange",g,false);location.hash?g():d()}return c};c.parser=function(h){if(!arguments.length)return a;a=h;return c};c.formatter=function(h){if(!arguments.length)return f;f=h;return c};return c};v.touch=function(){function d(s,w){for(var z=-1,E=s.length;++z<E;){var y=s[z],F=y.identifier;switch(w){case "start":j[F]={};j[F].start=j[F].current=
a.mouse(y);break;case "current":if(j[F])j[F].current=a.mouse(y);break;case "finish":delete j[F];break}}k[w]=true;if(w==="current")u||(u=setTimeout(g,0))}function g(){if(k.start||k.finish){h=a.zoom();angle=a.angle();r=c("start")}k={};u=null;var s=c("current"),w=s.n>1?Math.log(s.r/r.r)/Math.LN2+h-a.zoom():0;s.n&&a.zoomBy(w,s,r.location);if(l&&"angle"in s){w=s.angle-r.angle;var z=a.center();a.center(s.location);a.angle(angle+w);a.center(z)}}function c(s){var w=[],z;for(z in j)j[z][s]&&w.push(j[z][s]);
if(w.length){z=0;for(var E=w.length,y={x:w[0].x,y:w[0].y};++z<E;){y.x+=w[z].x;y.y+=w[z].y}y.x/=E;y.y/=E;y.r=0;for(z=-1;++z<E;){var F=w[z].x-y.x,m=w[z].y-y.y;F=F*F+m*m;if(F>y.r)y.r=F}y.r=Math.sqrt(y.r);if(l&&E===2){F=w[1].x-w[0].x;m=w[1].y-w[0].y;y.angle=Math.atan2(m,F)}z=y}else z={};z=z;z.n=w.length;if(z&&(l||s!=="current"))z.location=a.pointLocation(z);return z}function n(s){function w(x){d(x.changedTouches,"current");x.preventDefault()}function z(x){d(x.changedTouches,"finish");document.removeEventListener("touchmove",
w,false);document.removeEventListener("touchend",z,false);document.removeEventListener("touchcancel",z,false);delete q.__polymaps_touch_listeners__}d(s.changedTouches,"start");for(var E={},y=-1,F=s.touches.length;++y<F;)E[s.touches[y].identifier]=true;for(var m in j)E[m]||delete j[m];var q=s.target;if(!q.__polymaps_touch_listeners__){document.addEventListener("touchmove",w,false);document.addEventListener("touchend",z,false);document.addEventListener("touchcancel",z,false);q.__polymaps_touch_listeners__=
true;s.preventDefault()}}var e={},a,f,h,r,l,j={},k={},u=null;e.rotate=function(s){if(!arguments.length)return l;l=s;return e};e.map=function(s){if(!arguments.length)return a;if(a){f.removeEventListener("touchstart",n,false);f=null}if(a=s){f=a.container();f.addEventListener("touchstart",n,false)}return e};return e};v.interact=function(){var d={},g=v.drag(),c=v.wheel(),n=v.dblclick(),e=v.arrow();d.map=function(a){g.map(a);c.map(a);n.map(a);e.map(a);return d};return d};v.compass=function(){function d(A){y.setAttribute("class",
"compass active");N||(N=setInterval(g,o));M&&H.panBy(M);x=Date.now();return j(A)}function g(){M&&Date.now()>x+i&&H.panBy(M)}function c(A){if(A.shiftKey){J={x0:H.mouse(A)};H.focusableParent().focus();return j(A)}}function n(A){if(J){J.x1=H.mouse(A);Q.setAttribute("x",Math.min(J.x0.x,J.x1.x));Q.setAttribute("y",Math.min(J.x0.y,J.x1.y));Q.setAttribute("width",Math.abs(J.x0.x-J.x1.x));Q.setAttribute("height",Math.abs(J.x0.y-J.x1.y));Q.removeAttribute("display")}}function e(){y.setAttribute("class","compass");
if(J){if(J.x1){H.extent([H.pointLocation({x:Math.min(J.x0.x,J.x1.x),y:Math.max(J.x0.y,J.x1.y)}),H.pointLocation({x:Math.max(J.x0.x,J.x1.x),y:Math.min(J.x0.y,J.x1.y)})]);Q.setAttribute("display","none")}J=null}if(N){clearInterval(N);N=0}}function a(A){return function(){A?this.setAttribute("class","active"):this.removeAttribute("class");M=A}}function f(A){return function(G){y.setAttribute("class","compass active");var I=H.zoom();H.zoom(A<0?Math.ceil(I)-1:Math.floor(I)+1);return j(G)}}function h(A){return function(G){H.zoom(A);
return j(G)}}function r(){this.setAttribute("class","active")}function l(){this.removeAttribute("class")}function j(A){A.stopPropagation();A.preventDefault();return false}function k(A){var G=Math.SQRT1_2*m,I=m*0.7,K=m*0.2,L=v.svg("g"),P=L.appendChild(v.svg("path")),W=L.appendChild(v.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d","M0,0L"+G+","+G+"A"+m+","+m+" 0 0,1 "+-G+","+G+"Z");W.setAttribute("class","chevron");W.setAttribute("d","M"+K+
","+(I-K)+"L0,"+I+" "+-K+","+(I-K));W.setAttribute("pointer-events","none");L.addEventListener("mousedown",d,false);L.addEventListener("mouseover",a(A),false);L.addEventListener("mouseout",a(null),false);L.addEventListener("dblclick",j,false);return L}function u(A){var G=m*0.4,I=G/2,K=v.svg("g"),L=K.appendChild(v.svg("path")),P=K.appendChild(v.svg("path")),W=K.appendChild(v.svg("path")),X=K.appendChild(v.svg("path"));L.setAttribute("class","back");L.setAttribute("d","M"+-G+",0V"+-G+"A"+G+","+G+" 0 1,1 "+
G+","+-G+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",L.getAttribute("d"));W.setAttribute("class","chevron");W.setAttribute("d","M"+-I+","+-G+"H"+I+(A>0?"M0,"+(-G-I)+"V"+-I:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",L.getAttribute("d"));K.addEventListener("mousedown",f(A),false);K.addEventListener("mouseover",r,false);K.addEventListener("mouseout",l,false);K.addEventListener("dblclick",j,false);return K}function s(A){var G=m*0.2,I=m*0.4,K=
v.svg("g"),L=K.appendChild(v.svg("rect")),P=K.appendChild(v.svg("path"));L.setAttribute("pointer-events","all");L.setAttribute("fill","none");L.setAttribute("x",-I);L.setAttribute("y",-0.75*I);L.setAttribute("width",2*I);L.setAttribute("height",1.5*I);P.setAttribute("class","chevron");P.setAttribute("d","M"+-G+",0H"+G);K.addEventListener("mousedown",h(A),false);K.addEventListener("dblclick",j,false);return K}function w(){var A=m+6,G=A,I=H.size();switch(t){case "top-left":break;case "top-right":A=
I.x-A;break;case "bottom-left":G=I.y-G;break;case "bottom-right":A=I.x-A;G=I.y-G;break}y.setAttribute("transform","translate("+A+","+G+")");Q.setAttribute("transform","translate("+-A+","+-G+")");for(var K in F)K==H.zoom()?F[K].setAttribute("class","active"):F[K].removeAttribute("class")}function z(){for(;y.lastChild;)y.removeChild(y.lastChild);y.appendChild(Q);if(B!="none"){T=y.appendChild(v.svg("g"));T.setAttribute("class","pan");var A=T.appendChild(v.svg("circle"));A.setAttribute("class","back");
A.setAttribute("r",m);T.appendChild(k({x:0,y:-q})).setAttribute("transform","rotate(0)");T.appendChild(k({x:q,y:0})).setAttribute("transform","rotate(90)");T.appendChild(k({x:0,y:q})).setAttribute("transform","rotate(180)");T.appendChild(k({x:-q,y:0})).setAttribute("transform","rotate(270)");A=T.appendChild(v.svg("circle"));A.setAttribute("fill","none");A.setAttribute("class","fore");A.setAttribute("r",m)}else T=null;if(C!="none"){D=y.appendChild(v.svg("g"));D.setAttribute("class","zoom");A=-0.5;
if(C=="big"){F={};var G=H.zoomRange()[0];for(A=0;G<=H.zoomRange()[1];G++,A++)(F[G]=D.appendChild(s(G))).setAttribute("transform","translate(0,"+-(A+0.75)*m*0.4+")")}G=B=="none"?0.4:2;D.setAttribute("transform","translate(0,"+m*(/^top-/.test(t)?G+(A+0.5)*0.4:-G)+")");D.appendChild(u(+1)).setAttribute("transform","translate(0,"+-(A+0.5)*m*0.4+")");D.appendChild(u(-1)).setAttribute("transform","scale(-1)")}else D=null;w()}var E={},y=v.svg("g"),F={},m=30,q=16,x=0,i=250,o=50,t="top-left",C="small",D,B=
"small",N,M,T,J,Q=v.svg("rect"),H,R,O;y.setAttribute("class","compass");Q.setAttribute("class","back fore");Q.setAttribute("pointer-events","none");Q.setAttribute("display","none");E.radius=function(A){if(!arguments.length)return m;m=A;H&&z();return E};E.speed=function(A){if(!arguments.length)return m;q=A;return E};E.position=function(A){if(!arguments.length)return t;t=A;H&&z();return E};E.pan=function(A){if(!arguments.length)return B;B=A;H&&z();return E};E.zoom=function(A){if(!arguments.length)return C;
C=A;H&&z();return E};E.map=function(A){if(!arguments.length)return H;if(H){R.removeEventListener("mousedown",c,false);R.removeChild(y);R=null;O.removeEventListener("mousemove",n,false);O.removeEventListener("mouseup",e,false);O=null;H.off("move",w).off("resize",w)}if(H=A){R=H.container();R.appendChild(y);R.addEventListener("mousedown",c,false);O=R.ownerDocument.defaultView;O.addEventListener("mousemove",n,false);O.addEventListener("mouseup",e,false);H.on("move",w).on("resize",w);z()}return E};return E};
v.grid=function(){function d(){var e=n.firstChild,a=c.size(),f=c.pointLocation($);c.pointLocation(a);var h=Math.pow(2,4-Math.round(c.zoom()));f.lat=Math.floor(f.lat/h)*h;f.lon=Math.ceil(f.lon/h)*h;for(var r;(r=c.locationPoint(f).x)<=a.x;f.lon+=h){e||(e=n.appendChild(v.svg("line")));e.setAttribute("x1",r);e.setAttribute("x2",r);e.setAttribute("y1",0);e.setAttribute("y2",a.y);e=e.nextSibling}for(;(r=c.locationPoint(f).y)<=a.y;f.lat-=h){e||(e=n.appendChild(v.svg("line")));e.setAttribute("y1",r);e.setAttribute("y2",
r);e.setAttribute("x1",0);e.setAttribute("x2",a.x);e=e.nextSibling}for(;e;){a=e.nextSibling;n.removeChild(e);e=a}}var g={},c,n=v.svg("g");n.setAttribute("class","grid");g.map=function(e){if(!arguments.length)return c;if(c){n.parentNode.removeChild(n);c.off("move",d).off("resize",d)}if(c=e){c.on("move",d).on("resize",d);c.container().appendChild(n);c.dispatch({type:"move"})}return g};return g};v.stylist=function(){function d(e){var a=e.features.length,f=g.length,h=c.length,r,l,j,k,u,s;for(u=0;u<a;++u)if(l=
(r=e.features[u]).element){r=r.data;for(s=0;s<f;++s){k=(j=g[s]).value;if(typeof k==="function")k=k.call(null,r);k==null?j.name.local?l.removeAttributeNS(j.name.space,j.name.local):l.removeAttribute(j.name):j.name.local?l.setAttributeNS(j.name.space,j.name.local,k):l.setAttribute(j.name,k)}for(s=0;s<h;++s){k=(j=c[s]).value;if(typeof k==="function")k=k.call(null,r);k==null?l.style.removeProperty(j.name):l.style.setProperty(j.name,k,j.priority)}if(k=n){if(typeof k==="function")k=k.call(null,r);for(;l.lastChild;)l.removeChild(l.lastChild);
k!=null&&l.appendChild(v.svg("title")).appendChild(document.createTextNode(k))}}}var g=[],c=[],n;d.attr=function(e,a){g.push({name:ha(e),value:a});return d};d.style=function(e,a,f){c.push({name:e,value:a,priority:arguments.length<3?null:f});return d};d.title=function(e){n=e;return d};return d}})(org.polymaps);
