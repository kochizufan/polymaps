if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(t){function ha(d){var g=d.indexOf(":");return g<0?d:{space:t.ns[d.substring(0,g)],local:d.substring(g+1)}}function S(){for(var d=0;d<S.maps.length;d++)S.maps[d].resize()}function Y(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function Z(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function aa(d,g){if(d.row>g.row){var c=d;d=g;g=c}return{x0:d.column,y0:d.row,x1:g.column,y1:g.row,dx:g.column-d.column,dy:g.row-d.row}}function ea(d,g,c,m,e){c=Math.max(c,Math.floor(g.y0));
m=Math.min(m,Math.ceil(g.y1));if(d.x0==g.x0&&d.y0==g.y0?d.x0+g.dy/d.dy*d.dx<g.x1:d.x1-g.dy/d.dy*d.dx<g.x0){var a=d;d=g;g=a}a=d.dx/d.dy;var f=g.dx/g.dy,j=d.dx>0,s=g.dx<0;for(c=c;c<m;c++){var r=a*Math.max(0,Math.min(d.dy,c+j-d.y0))+d.x0;e(Math.floor(f*Math.max(0,Math.min(g.dy,c+s-g.y0))+g.x0),Math.ceil(r),c)}}function fa(d,g,c,m,e,a){var f=aa(d,g);g=aa(g,c);d=aa(c,d);if(f.dy>g.dy){c=f;f=g;g=c}if(f.dy>d.dy){c=f;f=d;d=c}if(g.dy>d.dy){c=g;g=d;d=c}f.dy&&ea(d,f,m,e,a);g.dy&&ea(d,g,m,e,a)}t.version="2.5.1";
var $={x:0,y:0};t.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};t.id=function(){var d=0;return function(){return++d}}();t.svg=function(d){return document.createElementNS(t.ns.svg,d)};t.transform=function(d,g,c,m,e,a){var f={},j,s,r;if(!arguments.length){d=1;g=e=c=0;m=1;a=0}f.zoomFraction=function(k){if(!arguments.length)return s;s=k;j=Math.floor(s+Math.log(Math.sqrt(d*d+g*g+c*c+m*m))/Math.LN2);r=Math.pow(2,-j);return f};f.apply=function(k){var i=Math.pow(2,-k.zoom),v=
Math.pow(2,k.zoom-j);return{column:(d*k.column*i+c*k.row*i+e)*v,row:(g*k.column*i+m*k.row*i+a)*v,zoom:k.zoom-j}};f.unapply=function(k){var i=Math.pow(2,-k.zoom),v=Math.pow(2,k.zoom+j);return{column:(k.column*i*m-k.row*i*c-e*m+a*c)/(d*m-g*c)*v,row:(k.column*i*g-k.row*i*d-e*g+a*d)/(c*g-m*d)*v,zoom:k.zoom+j}};f.toString=function(){return"matrix("+[d*r,g*r,c*r,m*r].join(" ")+" 0 0)"};return f.zoomFraction(0)};t.cache=function(d,g){function c(i){k--;g&&g(i);delete f[i.key];if(i.next)i.next.prev=i.prev;
else if(s=i.prev)s.next=null;if(i.prev)i.prev.next=i.next;else if(j=i.next)j.prev=null}function m(){for(var i=s;k>r;i=i.prev){if(!i)break;i.lock||c(i)}}var e={},a={},f={},j=null,s=null,r=64,k=0;e.peek=function(i){return f[[i.zoom,i.column,i.row].join("/")]};e.load=function(i,v){var u=[i.zoom,i.column,i.row].join("/"),w=f[u];if(w){if(w.prev){if(w.prev.next=w.next)w.next.prev=w.prev;else s=w.prev;w.prev=null;w.next=j;j=j.prev=w}w.lock=1;return a[u]=w}w={key:u,column:i.column,row:i.row,zoom:i.zoom,next:j,
prev:null,lock:1};d.call(null,w,v);a[u]=f[u]=w;if(j)j.prev=w;else s=w;j=w;k++;return w};e.unload=function(i){if(!(i in a))return false;var v=a[i];v.lock=0;delete a[i];v.request&&v.request.abort(false)&&c(v);return v};e.locks=function(){return a};e.size=function(i){if(!arguments.length)return r;r=i;m();return e};e.flush=function(){m();return e};e.clear=function(){for(var i in f){var v=f[i];v.request&&v.request.abort(false);g&&g(f[i]);if(v.lock){v.lock=0;v.element.parentNode.removeChild(v.element)}}a=
{};f={};j=s=null;k=0;return e};return e};t.url=function(d){function g(e){var a=e.zoom<0?1:1<<e.zoom,f=e.column;if(m){f=e.column%a;if(f<0)f+=a}else if(f<0||f>=a)return null;return d.replace(/{(.)}/g,function(j,s){switch(s){case "S":return c[(Math.abs(e.zoom)+e.row+f)%c.length];case "Z":return e.zoom;case "X":return f;case "Y":return e.row;case "B":var r=t.map.coordinateLocation({row:e.row,column:f,zoom:e.zoom}),k=t.map.coordinateLocation({row:e.row+1,column:f+1,zoom:e.zoom}),i=Math.ceil(Math.log(e.zoom)/
Math.LN2);return k.lat.toFixed(i)+","+r.lon.toFixed(i)+","+r.lat.toFixed(i)+","+k.lon.toFixed(i)}return s})}var c=[],m=true;g.template=function(e){if(!arguments.length)return d;d=e;return g};g.hosts=function(e){if(!arguments.length)return c;c=e;return g};g.repeat=function(e){if(!arguments.length)return m;m=e;return g};return g};t.dispatch=function(d){var g={};d.on=function(c,m){for(var e=g[c]||(g[c]=[]),a=0;a<e.length;a++)if(e[a].handler==m)return d;e.push({handler:m,on:true});return d};d.off=function(c,
m){var e=g[c];if(e)for(var a=0;a<e.length;a++){var f=e[a];if(f.handler==m){f.on=false;e.splice(a,1);break}}return d};return function(c){var m=g[c.type];if(m){m=m.slice();for(var e=0;e<m.length;e++){var a=m[e];a.on&&a.handler.call(d,c)}}}};t.queue=function(){function d(){if(!(e>=a||!m.length)){e++;m.pop()()}}function g(f){for(var j=0;j<m.length;j++)if(m[j]==f){m.splice(j,1);return true}return false}function c(f,j,s){function r(){k=new XMLHttpRequest;s&&k.overrideMimeType&&k.overrideMimeType(s);k.open("GET",
f,true);k.onreadystatechange=function(){if(k.readyState==4){e--;k.status<300&&j(k);d()}};k.send(null)}var k;m.push(r);d();return{abort:function(i){if(g(r))return true;if(i&&k){k.abort();return true}return false}}}var m=[],e=0,a=6;return{text:function(f,j,s){return c(f,function(r){r.responseText&&j(r.responseText)},s)},xml:function(f,j){return c(f,function(s){s.responseXML&&j(s.responseXML)},"application/xml")},json:function(f,j){return c(f,function(s){s.responseText&&j(JSON.parse(s.responseText))},
"application/json")},image:function(f,j,s){function r(){k=document.createElement("img");k.onerror=function(){e--;d()};k.onload=function(){e--;s(k);d()};k.src=j;f.setAttributeNS(t.ns.xlink,"href",j)}var k;m.push(r);d();return{abort:function(i){if(g(r))return true;if(i&&k){k.src="about:";return true}return false}}}}}();t.map=function(){function d(){if(v)if(r<v[0])r=v[0];else if(r>v[1])r=v[1];k=r-(r=Math.round(r));i=Math.pow(2,k)}function g(){if(n){var h=45/Math.pow(2,r+k-3),o=Math.max(Math.abs(y*f.x+
w*f.y),Math.abs(z*f.x+E*f.y)),q=Y(G-o*h/j.y);o=Y(l+o*h/j.y);s.lat=Math.max(q,Math.min(o,s.lat));q=Math.max(Math.abs(y*f.y+w*f.x),Math.abs(z*f.y+E*f.x));s.lon=Math.max(n[0].lon-q*h/j.x,Math.min(n[1].lon+q*h/j.x,s.lon))}}var c={},m,e,a=$,f=$,j={x:256,y:256},s={lat:37.76487,lon:-122.41948},r=12,k=0,i=1,v=[1,18],u=0,w=1,y=0,E=1,z=0,G=-180,l=180,n=[{lat:Y(G),lon:-Infinity},{lat:Y(l),lon:Infinity}];c.locationCoordinate=function(h){h=t.map.locationCoordinate(h);var o=Math.pow(2,r);h.column*=o;h.row*=o;h.zoom+=
r;return h};c.coordinateLocation=t.map.coordinateLocation;c.coordinatePoint=function(h,o){var q=Math.pow(2,r-o.zoom),C=Math.pow(2,r-h.zoom),D=(o.column*q-h.column*C)*j.x*i;q=(o.row*q-h.row*C)*j.y*i;return{x:f.x+w*D-y*q,y:f.y+y*D+w*q}};c.pointCoordinate=function(h,o){var q=Math.pow(2,r-h.zoom),C=(o.x-f.x)/i,D=(o.y-f.y)/i;return{column:h.column*q+(E*C-z*D)/j.x,row:h.row*q+(z*C+E*D)/j.y,zoom:r}};c.locationPoint=function(h){var o=Math.pow(2,r+k-3)/45,q=(h.lon-s.lon)*o*j.x;h=(Z(s.lat)-Z(h.lat))*o*j.y;
return{x:f.x+w*q-y*h,y:f.y+y*q+w*h}};c.pointLocation=function(h){var o=45/Math.pow(2,r+k-3),q=(h.x-f.x)*o;h=(h.y-f.y)*o;return{lon:s.lon+(E*q-z*h)/j.x,lat:Y(Z(s.lat)-(z*q+E*h)/j.y)}};var x=t.svg("rect");x.setAttribute("visibility","hidden");x.setAttribute("pointer-events","all");c.container=function(h){if(!arguments.length)return m;m=h;m.setAttribute("class","map");m.appendChild(x);return c.resize()};c.focusableParent=function(){for(var h=m;h;h=h.parentNode)if(h.tabIndex>=0)return h;return window};
c.mouse=function(h){var o=(m.ownerSVGElement||m).createSVGPoint();if(ba<0&&(window.scrollX||window.scrollY)){var q=document.body.appendChild(t.svg("svg"));q.style.position="absolute";q.style.top=q.style.left="0px";var C=q.getScreenCTM();ba=!(C.f||C.e);document.body.removeChild(q)}if(ba){o.x=h.pageX;o.y=h.pageY}else{o.x=h.clientX;o.y=h.clientY}return o.matrixTransform(m.getScreenCTM().inverse())};c.size=function(h){if(!arguments.length)return a;e=h;return c.resize()};c.resize=function(){if(e){a=e;
S.remove(c)}else{x.setAttribute("width","100%");x.setAttribute("height","100%");b=x.getBBox();a={x:b.width,y:b.height};S.add(c)}x.setAttribute("width",a.x);x.setAttribute("height",a.y);f={x:a.x/2,y:a.y/2};g();c.dispatch({type:"resize"});return c};c.tileSize=function(h){if(!arguments.length)return j;j=h;c.dispatch({type:"move"});return c};c.center=function(h){if(!arguments.length)return s;s=h;g();c.dispatch({type:"move"});return c};c.panBy=function(h){var o=45/Math.pow(2,r+k-3),q=h.x*o;h=h.y*o;return c.center({lon:s.lon+
(z*h-E*q)/j.x,lat:Y(Z(s.lat)+(z*q+E*h)/j.y)})};c.centerRange=function(h){if(!arguments.length)return n;if(n=h){G=n[0].lat>-90?Z(n[0].lat):-Infinity;l=n[0].lat<90?Z(n[1].lat):Infinity}else{G=-Infinity;l=Infinity}g();c.dispatch({type:"move"});return c};c.zoom=function(h){if(!arguments.length)return r+k;r=h;d();return c.center(s)};c.zoomBy=function(h,o,q){if(arguments.length<2)return c.zoom(r+k+h);if(arguments.length<3)q=c.pointLocation(o);r=r+k+h;d();var C=c.locationPoint(q);return c.panBy({x:o.x-C.x,
y:o.y-C.y})};c.zoomRange=function(h){if(!arguments.length)return v;v=h;return c.zoom(r+k)};c.extent=function(h){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,y:0})];var o=c.locationPoint(h[0]),q=c.locationPoint(h[1]),C=Math.max((q.x-o.x)/a.x,(o.y-q.y)/a.y);o=c.pointLocation({x:(o.x+q.x)/2,y:(o.y+q.y)/2});r=r+k-Math.log(C)/Math.LN2;d();return c.center(o)};c.angle=function(h){if(!arguments.length)return u;u=h;w=Math.cos(u);y=Math.sin(u);E=Math.cos(-u);z=Math.sin(-u);
g();c.dispatch({type:"move"});return c};c.add=function(h){h.map(c);return c};c.remove=function(h){h.map(null);return c};c.dispatch=t.dispatch(c);return c};S.maps=[];S.add=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==d)return;S.maps.push(d)};S.remove=function(d){for(var g=0;g<S.maps.length;g++)if(S.maps[g]==d){S.maps.splice(g,1);return}};if(window.addEventListener){window.addEventListener("resize",S,false);window.addEventListener("load",S,false)}t.map.locationCoordinate=function(d){var g=
1/360;return{column:(d.lon+180)*g,row:(180-Z(d.lat))*g,zoom:0}};t.map.coordinateLocation=function(d){var g=45/Math.pow(2,d.zoom-3);return{lon:g*d.column-180,lat:Y(180-g*d.row)}};var ba=/WebKit/.test(navigator.userAgent)?-1:0;t.layer=function(d,g){function c(z){for(var G=y[0].nextSibling;w<z;w++){v.insertBefore(y[-4],G);v.insertBefore(y[2],G);v.insertBefore(y[1],G);for(var l=y[-4],n=-4;n<2;)y[n]=y[++n];y[n]=l}}function m(z){for(var G=y[0].nextSibling;w>z;w--){v.insertBefore(y[-1],G);v.insertBefore(y[2],
y[-4]);for(var l=y[2],n=2;n>-4;)y[n]=y[--n];y[n]=l}}function e(){function z(O){var A=O.zoom,F=A<0?1:1<<A,I=O.column%F,K=O.row;if(I<0)I+=F;return{locationPoint:function(L){L=t.map.locationCoordinate(L);var P=Math.pow(2,A-L.zoom);return{x:C.x*(P*L.column-I),y:C.y*(P*L.row-K)}}}}function G(O,A,F){var I=M.zoom,K=2-Q,L=4+Q;for(O=O;O<A;O++){var P=f.load({column:O,row:F,zoom:I},z);if(!P.ready&&!(P.key in H)){P.proxyRefs={};for(var W,X,U,V=1;V<=K;V++){X=true;for(var ca=0,ga=1<<V;ca<=ga;ca++)for(var da=0;da<=
ga;da++)if((U=f.peek(W={column:(O<<V)+da,row:(F<<V)+ca,zoom:I+V}))&&U.ready){H[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U}else X=false;if(X)break}if(!X)for(V=1;V<=L;V++)if((U=f.peek(W={column:O>>V,row:F>>V,zoom:I-V}))&&U.ready){H[U.key]=f.load(W);U.proxyCount++;P.proxyRefs[U.key]=U;break}}H[P.key]=P}}function l(O){return Math.round(O*256)/256}var n=a.map(),x=n.zoom(),h=x-(x=Math.round(x)),o=n.size(),q=n.angle(),C=n.tileSize(),D=n.locationCoordinate(n.center());if(w!=x){if(w<x)c(x);else if(w>
x)m(x);else w=x;for(var B=-4;B<=2;B++){var N=y[B];N.setAttribute("class","zoom"+(B<0?"":"+")+B+" zoom"+(x+B));N.setAttribute("transform","scale("+Math.pow(2,-B)+")")}}var M=n.pointCoordinate(D,$);B=n.pointCoordinate(D,{x:o.x,y:0});x=n.pointCoordinate(D,o);n=n.pointCoordinate(D,{x:0,y:o.y});N=D.column;var T=D.row;D.column=Math.round((Math.round(C.x*D.column)+(o.x&1)/2)/C.x);D.row=Math.round((Math.round(C.y*D.row)+(o.y&1)/2)/C.y);N-=D.column;T-=D.row;var J=l(Math.pow(2,h));v.setAttribute("transform",
"translate("+Math.round(o.x/2-N*C.x*J)+","+Math.round(o.y/2-T*C.y*J)+")"+(q?"rotate("+q/Math.PI*180+")":"")+(h?"scale("+J+")":"")+(u?u.zoomFraction(h):""));if(u){M=u.unapply(M);B=u.unapply(B);x=u.unapply(x);n=u.unapply(n);D=u.unapply(D)}var Q=r?r(M.zoom)-M.zoom:0;if(Q){o=Math.pow(2,Q);M.column*=o;M.row*=o;B.column*=o;B.row*=o;x.column*=o;x.row*=o;n.column*=o;n.row*=o;M.zoom=B.zoom=x.zoom=n.zoom+=Q}h=f.locks();var H={};for(var R in h)h[R].proxyCount=0;if(s&&Q>-5&&Q<3){q=M.zoom<0?1:1<<M.zoom;if(j){fa(M,
B,x,0,q,G);fa(x,n,M,0,q,G)}else{o=Math.floor((M.column+x.column)/2);q=Math.max(0,Math.min(q-1,Math.floor((B.row+n.row)/2)));B=Math.min(4,M.zoom);o=o>>B<<B;q=q>>B<<B;G(o,o+1,q)}}for(R in H){B=H[R];o=l(Math.pow(2,B.level=B.zoom-D.zoom));B.element.setAttribute("transform","translate("+Math.round(B.x=C.x*(B.column-D.column*o))+","+Math.round(B.y=C.y*(B.row-D.row*o))+")")}for(R in h)if(!(R in H)){B=f.unload(R);B.element.parentNode.removeChild(B.element);delete B.proxyRefs}for(R in H){B=H[R];if(B.element.parentNode!=
y[B.level]){y[B.level].appendChild(B.element);a.show&&a.show(B)}}f.flush();a.dispatch({type:"move"})}var a={},f=a.cache=t.cache(d,g).size(512),j=true,s=true,r,k,i,v=t.svg("g"),u,w,y={};v.setAttribute("class","layer");for(var E=-4;E<=-1;E++)y[E]=v.appendChild(t.svg("g"));for(E=2;E>=1;E--)y[E]=v.appendChild(t.svg("g"));y[0]=v.appendChild(t.svg("g"));a.map=function(z){if(!arguments.length)return i;if(i){if(i==z){v.parentNode.appendChild(v);return a}i.off("move",e).off("resize",e);v.parentNode.removeChild(v)}if(i=
z){i.container().appendChild(v);a.init&&a.init(v);i.on("move",e).on("resize",e);e()}return a};a.container=function(){return v};a.levels=function(){return y};a.id=function(z){if(!arguments.length)return k;k=z;v.setAttribute("id",z);return a};a.visible=function(z){if(!arguments.length)return s;(s=z)?v.removeAttribute("visibility"):v.setAttribute("visibility","hidden");i&&e();return a};a.transform=function(z){if(!arguments.length)return u;u=z;i&&e();return a};a.zoom=function(z){if(!arguments.length)return r;
r=typeof z=="function"||z==null?z:function(){return z};i&&e();return a};a.tile=function(z){if(!arguments.length)return j;j=z;i&&e();return a};a.reload=function(){f.clear();i&&e();return a};a.dispatch=t.dispatch(a);a.on("load",function(z){if(z.tile.proxyRefs){for(var G in z.tile.proxyRefs){var l=z.tile.proxyRefs[G];--l.proxyCount<=0&&f.unload(G)&&l.element.parentNode.removeChild(l.element)}delete z.tile.proxyRefs}});return a};t.image=function(){var d=t.layer(function(c){var m=c.element=t.svg("image"),
e=d.map().tileSize();m.setAttribute("preserveAspectRatio","none");m.setAttribute("width",e.x);m.setAttribute("height",e.y);if(typeof g=="function"){m.setAttribute("opacity",0);e=g(c);if(e!=null)c.request=t.queue.image(m,e,function(a){delete c.request;c.ready=true;c.img=a;m.removeAttribute("opacity");d.dispatch({type:"load",tile:c})});else{c.ready=true;d.dispatch({type:"load",tile:c})}}else{c.ready=true;g!=null&&m.setAttributeNS(t.ns.xlink,"href",g);d.dispatch({type:"load",tile:c})}},function(c){c.request&&
c.request.abort(true)}),g;d.url=function(c){if(!arguments.length)return g;g=typeof c=="string"&&/{.}/.test(c)?t.url(c):c;return d.reload()};return d};t.geoJson=function(d){function g(l){var n={lat:0,lon:0};return function(x){n.lat=x[1];n.lon=x[0];var h=l(n);x.x=h.x;x.y=h.y;return h}}function c(l,n){return l&&l.type in y&&y[l.type](l,n)}function m(l,n,x){return l.type in E&&E[l.type](l,n,x)}function e(){var l=a.map().zoom(),n=a.cache.locks(),x,h,o,q,C,D,B;if(u=="fixed")for(x in n){if((h=n[x]).scale!=
l){B="scale("+Math.pow(2,h.zoom-l)+")";q=-1;for(C=(o=h.features).length;++q<C;)m((D=o[q]).data.geometry,D.element,B);h.scale=l}}else for(x in n){q=-1;for(C=(o=(h=n[x]).features).length;++q<C;)m((D=o[q]).data.geometry,D.element,"");delete h.scale}}var a=t.layer(function(l,n){function x(o){var q=[];if(o.next)l.request=d(o.next.href,x);switch(o.type){case "FeatureCollection":for(var C=0;C<o.features.length;C++){var D=o.features[C],B=c(D.geometry,n);B&&q.push({element:h.appendChild(B),data:D})}break;
case "Feature":(B=c(o.geometry,n))&&q.push({element:h.appendChild(B),data:o});break;default:(B=c(o,n))&&q.push({element:h.appendChild(B),data:{type:"Feature",geometry:o}});break}l.ready=true;q.push.apply(l.features,q);a.dispatch({type:"load",tile:l,features:q})}var h=l.element=t.svg("g");l.features=[];n=g(n(l).locationPoint);if(j!=null)l.request=d(typeof j=="function"?j(l):j,x);else x({type:"FeatureCollection",features:w||[]})},function(l){l.request&&l.request.abort(true)}),f=a.container(),j,s=true,
r="org.polymaps."+t.id(),k="url(#"+r+")",i=f.insertBefore(t.svg("clipPath"),f.firstChild),v=i.appendChild(t.svg("rect")),u="auto",w;f.setAttribute("fill-rule","evenodd");i.setAttribute("id",r);if(!arguments.length)d=t.queue.json;var y={Point:function(l,n){var x=n(l.coordinates),h=t.svg("circle");h.setAttribute("r",4.5);h.setAttribute("transform","translate("+x.x+","+x.y+")");return h},MultiPoint:function(l,n){for(var x=t.svg("g"),h=l.coordinates,o,q,C=-1,D=h.length;++C<D;){q=x.appendChild(t.svg("circle"));
q.setAttribute("r",4.5);q.setAttribute("transform","translate("+(o=n(h[C])).x+","+o.y+")")}return x},LineString:function(l,n){for(var x=t.svg("path"),h=["M"],o=l.coordinates,q,C=-1,D=o.length;++C<D;)h.push((q=n(o[C])).x,",",q.y,"L");h.pop();if(h.length){x.setAttribute("d",h.join(""));return x}},MultiLineString:function(l,n){for(var x=t.svg("path"),h=[],o=l.coordinates,q,C=-1,D,B=o.length,N;++C<B;){q=o[C];D=-1;N=q.length;for(h.push("M");++D<N;)h.push((p=n(q[D])).x,",",p.y,"L");h.pop()}if(h.length){x.setAttribute("d",
h.join(""));return x}},Polygon:function(l,n){for(var x=t.svg("path"),h=[],o=l.coordinates,q,C=-1,D,B=o.length,N;++C<B;){q=o[C];D=-1;N=q.length-1;for(h.push("M");++D<N;)h.push((p=n(q[D])).x,",",p.y,"L");h[h.length-1]="Z"}if(h.length){x.setAttribute("d",h.join(""));return x}},MultiPolygon:function(l,n){for(var x=t.svg("path"),h=[],o=l.coordinates,q,C,D=-1,B,N,M=o.length,T,J;++D<M;){q=o[D];B=-1;for(T=q.length;++B<T;){C=q[B];N=-1;J=C.length-1;for(h.push("M");++N<J;)h.push((p=n(C[N])).x,",",p.y,"L");h[h.length-
1]="Z"}}if(h.length){x.setAttribute("d",h.join(""));return x}},GeometryCollection:function(l,n){for(var x=t.svg("g"),h=-1,o=l.geometries,q=o.length,C;++h<q;)(C=c(o[h],n))&&x.appendChild(C);return x}},E={Point:function(l,n,x){l=l.coordinates;n.setAttribute("transform","translate("+l.x+","+l.y+")"+x)},MultiPoint:function(l,n,x){l=l.coordinates;var h=-1,o=q.length;n=n.firstChild;for(var q;++h<o;){q=l[h];n.setAttribute("transform","translate("+q.x+","+q.y+")"+x);n=n.nextSibling}}};a.url=function(l){if(!arguments.length)return j;
j=typeof l=="string"&&/{.}/.test(l)?t.url(l):l;if(j!=null)w=null;typeof j=="string"&&a.tile(false);return a.reload()};a.features=function(l){if(!arguments.length)return w;if(w=l){j=null;a.tile(false)}return a.reload()};a.clip=function(l){if(!arguments.length)return s;s&&f.removeChild(i);if(s=l)f.insertBefore(i,f.firstChild);var n=a.cache.locks();for(var x in n)s?n[x].element.setAttribute("clip-path",k):n[x].element.removeAttribute("clip-path");return a};var z=a.tile;a.tile=function(l){arguments.length&&
!l&&a.clip(l);return z.apply(a,arguments)};var G=a.map;a.map=function(l){if(l&&v){var n=l.tileSize();v.setAttribute("width",n.x);v.setAttribute("height",n.y)}return G.apply(a,arguments)};a.scale=function(l){if(!arguments.length)return u;(u=l)?a.on("move",e):a.off("move",e);a.map()&&e();return a};a.show=function(l){s?l.element.setAttribute("clip-path",k):l.element.removeAttribute("clip-path");a.dispatch({type:"show",tile:l,features:l.features});return a};a.reshow=function(){var l=a.cache.locks();for(var n in l)a.show(l[n]);
return a};return a};t.dblclick=function(){function d(a){var f=m.zoom();f=a.shiftKey?Math.ceil(f)-f-1:1-f+Math.floor(f);c==="mouse"?m.zoomBy(f,m.mouse(a)):m.zoomBy(f)}var g={},c="mouse",m,e;g.zoom=function(a){if(!arguments.length)return c;c=a;return g};g.map=function(a){if(!arguments.length)return m;if(m){e.removeEventListener("dblclick",d,false);e=null}if(m=a){e=m.container();e.addEventListener("dblclick",d,false)}return g};return g};t.drag=function(){function d(f){if(!f.shiftKey){a={x:f.clientX,
y:f.clientY};m.focusableParent().focus();f.preventDefault();document.body.style.setProperty("cursor","move",null)}}function g(f){if(a){m.panBy({x:f.clientX-a.x,y:f.clientY-a.y});a.x=f.clientX;a.y=f.clientY}}var c={},m,e,a;c.map=function(f){if(!arguments.length)return m;if(m){e.removeEventListener("mousedown",d,false);e=null}if(m=f){e=m.container();e.addEventListener("mousedown",d,false)}return c};window.addEventListener("mousemove",g,false);window.addEventListener("mouseup",function(f){if(a){g(f);
a=null;document.body.style.removeProperty("cursor")}},false);return c};t.wheel=function(){function d(){f=null}function g(i){var v=i.wheelDelta||-i.detail,u;if(v)if(e){try{k.scrollTop=1E3;k.dispatchEvent(i);v=1E3-k.scrollTop}catch(w){}v*=0.0050}else{u=Date.now();if(u-m>200){v=v>0?+1:-1;m=u}else v=0}if(v)switch(a){case "mouse":u=j.mouse(i);f||(f=j.pointLocation(u));j.off("move",d).zoomBy(v,u,f).on("move",d);break;case "location":j.zoomBy(v,j.locationPoint(f),f);break;default:j.zoomBy(v);break}i.preventDefault();
return false}var c={},m=0,e=true,a="mouse",f,j,s,r=document.createElement("div"),k=document.createElement("div");k.style.visibility="hidden";k.style.top="0px";k.style.height="0px";k.style.width="0px";k.style.overflowY="scroll";r.style.height="2000px";k.appendChild(r);document.body.appendChild(k);c.smooth=function(i){if(!arguments.length)return e;e=i;return c};c.zoom=function(i,v){if(!arguments.length)return a;a=i;f=v;if(j)a=="mouse"?j.on("move",d):j.off("move",d);return c};c.map=function(i){if(!arguments.length)return j;
if(j){s.removeEventListener("mousemove",d,false);s.removeEventListener("mousewheel",g,false);s.removeEventListener("MozMousePixelScroll",g,false);s=null;j.off("move",d)}if(j=i){a=="mouse"&&j.on("move",d);s=j.container();s.addEventListener("mousemove",d,false);s.addEventListener("mousewheel",g,false);s.addEventListener("MozMousePixelScroll",g,false)}return c};return c};t.arrow=function(){function d(u){if(!(u.ctrlKey||u.altKey||u.metaKey)){var w=Date.now(),y=0,E=0;switch(u.keyCode){case 37:if(!a.left){f=
w;a.left=1;a.right||(y=k)}break;case 39:if(!a.right){f=w;a.right=1;a.left||(y=-k)}break;case 38:if(!a.up){f=w;a.up=1;a.down||(E=k)}break;case 40:if(!a.down){f=w;a.down=1;a.up||(E=-k)}break;default:return}if(y||E)i.panBy({x:y,y:E});if(!j&&a.left|a.right|a.up|a.down)j=setInterval(m,r);u.preventDefault()}}function g(u){f=Date.now();switch(u.keyCode){case 37:a.left=0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(j&&!(a.left|a.right|a.up|a.down))j=clearInterval(j);
u.preventDefault()}function c(u){switch(u.charCode){case 45:case 95:i.zoom(Math.ceil(i.zoom())-1);break;case 43:case 61:i.zoom(Math.floor(i.zoom())+1);break;default:return}u.preventDefault()}function m(){if(i)if(!(Date.now()<f+s)){var u=(a.left-a.right)*k,w=(a.up-a.down)*k;if(u||w)i.panBy({x:u,y:w})}}var e={},a={left:0,right:0,up:0,down:0},f=0,j,s=250,r=50,k=16,i,v;e.map=function(u){if(!arguments.length)return i;if(i){v.removeEventListener("keypress",c,false);v.removeEventListener("keydown",d,false);
v.removeEventListener("keyup",g,false);v=null}if(i=u){v=i.focusableParent();v.addEventListener("keypress",c,false);v.addEventListener("keydown",d,false);v.addEventListener("keyup",g,false)}return e};e.speed=function(u){if(!arguments.length)return k;k=u;return e};return e};t.hash=function(){function d(){var j=f(e);if(m!==j)location.replace(m=j)}function g(){if(location.hash!==m)if(a(e,(m=location.hash).substring(1)))d()}var c={},m,e,a=function(j,s){var r=s.split("/").map(Number);if(r.length<3||r.some(isNaN))return true;
else{var k=j.size();j.zoomBy(r[0]-j.zoom(),{x:k.x/2,y:k.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,r[1])),lon:r[2]})}},f=function(j){var s=j.center();j=j.zoom();var r=Math.max(0,Math.ceil(Math.log(j)/Math.LN2));return"#"+j.toFixed(2)+"/"+s.lat.toFixed(r)+"/"+s.lon.toFixed(r)};c.map=function(j){if(!arguments.length)return e;if(e){e.off("move",d);window.removeEventListener("hashchange",g,false)}if(e=j){e.on("move",d);window.addEventListener("hashchange",g,false);location.hash?g():d()}return c};
c.parser=function(j){if(!arguments.length)return a;a=j;return c};c.formatter=function(j){if(!arguments.length)return f;f=j;return c};return c};t.touch=function(){function d(u,w){for(var y=-1,E=u.length;++y<E;){var z=u[y],G=z.identifier;switch(w){case "start":k[G]={};k[G].start=k[G].current=a.mouse(z);break;case "current":if(k[G])k[G].current=a.mouse(z);break;case "finish":delete k[G];break}}i[w]=true;if(w==="current")v||(v=setTimeout(g,0))}function g(){if(i.start||i.finish){j=a.zoom();angle=a.angle();
s=c("start")}i={};v=null;var u=c("current"),w=u.n>1?Math.log(u.r/s.r)/Math.LN2+j-a.zoom():0;u.n&&a.zoomBy(w,u,s.location);if(r&&"angle"in u){w=u.angle-s.angle;var y=a.center();a.center(u.location);a.angle(angle+w);a.center(y)}}function c(u){var w=[],y;for(y in k)k[y][u]&&w.push(k[y][u]);if(w.length){y=0;for(var E=w.length,z={x:w[0].x,y:w[0].y};++y<E;){z.x+=w[y].x;z.y+=w[y].y}z.x/=E;z.y/=E;z.r=0;for(y=-1;++y<E;){var G=w[y].x-z.x,l=w[y].y-z.y;G=G*G+l*l;if(G>z.r)z.r=G}z.r=Math.sqrt(z.r);if(r&&E===2){G=
w[1].x-w[0].x;l=w[1].y-w[0].y;z.angle=Math.atan2(l,G)}y=z}else y={};y=y;y.n=w.length;if(y&&(r||u!=="current"))y.location=a.pointLocation(y);return y}function m(u){function w(x){d(x.changedTouches,"current");x.preventDefault()}function y(x){d(x.changedTouches,"finish");n.removeEventListener("touchmove",w,false);n.removeEventListener("touchend",y,false);n.removeEventListener("touchcancel",y,false);delete n.__polymaps_touch_listeners__}d(u.changedTouches,"start");for(var E={},z=-1,G=u.touches.length;++z<
G;)E[u.touches[z].identifier]=true;for(var l in k)E[l]||delete k[l];var n=u.target;if(!n.__polymaps_touch_listeners__){n.addEventListener("touchmove",w,false);n.addEventListener("touchend",y,false);n.addEventListener("touchcancel",y,false);n.__polymaps_touch_listeners__=true}}var e={},a,f,j,s,r,k={},i={},v=null;e.rotate=function(u){if(!arguments.length)return r;r=u;return e};e.map=function(u){if(!arguments.length)return a;if(a){f.removeEventListener("touchstart",m,false);f=null}if(a=u){f=a.container();
f.addEventListener("touchstart",m,false)}return e};return e};t.interact=function(){var d={},g=t.drag(),c=t.wheel(),m=t.dblclick(),e=t.touch(),a=t.arrow();d.map=function(f){g.map(f);c.map(f);m.map(f);e.map(f);a.map(f);return d};return d};t.compass=function(){function d(A){z.setAttribute("class","compass active");N||(N=setInterval(g,o));M&&H.panBy(M);x=Date.now();return k(A)}function g(){M&&Date.now()>x+h&&H.panBy(M)}function c(A){if(A.shiftKey){J={x0:H.mouse(A)};H.focusableParent().focus();return k(A)}}
function m(A){if(J){J.x1=H.mouse(A);Q.setAttribute("x",Math.min(J.x0.x,J.x1.x));Q.setAttribute("y",Math.min(J.x0.y,J.x1.y));Q.setAttribute("width",Math.abs(J.x0.x-J.x1.x));Q.setAttribute("height",Math.abs(J.x0.y-J.x1.y));Q.removeAttribute("display")}}function e(){z.setAttribute("class","compass");if(J){if(J.x1){H.extent([H.pointLocation({x:Math.min(J.x0.x,J.x1.x),y:Math.max(J.x0.y,J.x1.y)}),H.pointLocation({x:Math.max(J.x0.x,J.x1.x),y:Math.min(J.x0.y,J.x1.y)})]);Q.setAttribute("display","none")}J=
null}if(N){clearInterval(N);N=0}}function a(A){return function(){A?this.setAttribute("class","active"):this.removeAttribute("class");M=A}}function f(A){return function(F){z.setAttribute("class","compass active");var I=H.zoom();H.zoom(A<0?Math.ceil(I)-1:Math.floor(I)+1);return k(F)}}function j(A){return function(F){H.zoom(A);return k(F)}}function s(){this.setAttribute("class","active")}function r(){this.removeAttribute("class")}function k(A){A.stopPropagation();A.preventDefault();return false}function i(A){var F=
Math.SQRT1_2*l,I=l*0.7,K=l*0.2,L=t.svg("g"),P=L.appendChild(t.svg("path")),W=L.appendChild(t.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d","M0,0L"+F+","+F+"A"+l+","+l+" 0 0,1 "+-F+","+F+"Z");W.setAttribute("class","chevron");W.setAttribute("d","M"+K+","+(I-K)+"L0,"+I+" "+-K+","+(I-K));W.setAttribute("pointer-events","none");L.addEventListener("mousedown",d,false);L.addEventListener("mouseover",a(A),false);L.addEventListener("mouseout",a(null),
false);L.addEventListener("dblclick",k,false);return L}function v(A){var F=l*0.4,I=F/2,K=t.svg("g"),L=K.appendChild(t.svg("path")),P=K.appendChild(t.svg("path")),W=K.appendChild(t.svg("path")),X=K.appendChild(t.svg("path"));L.setAttribute("class","back");L.setAttribute("d","M"+-F+",0V"+-F+"A"+F+","+F+" 0 1,1 "+F+","+-F+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",L.getAttribute("d"));W.setAttribute("class","chevron");W.setAttribute("d","M"+-I+","+-F+"H"+I+(A>0?"M0,"+(-F-I)+"V"+-I:
""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",L.getAttribute("d"));K.addEventListener("mousedown",f(A),false);K.addEventListener("mouseover",s,false);K.addEventListener("mouseout",r,false);K.addEventListener("dblclick",k,false);return K}function u(A){var F=l*0.2,I=l*0.4,K=t.svg("g"),L=K.appendChild(t.svg("rect")),P=K.appendChild(t.svg("path"));L.setAttribute("pointer-events","all");L.setAttribute("fill","none");L.setAttribute("x",-I);L.setAttribute("y",-0.75*
I);L.setAttribute("width",2*I);L.setAttribute("height",1.5*I);P.setAttribute("class","chevron");P.setAttribute("d","M"+-F+",0H"+F);K.addEventListener("mousedown",j(A),false);K.addEventListener("dblclick",k,false);return K}function w(){var A=l+6,F=A,I=H.size();switch(q){case "top-left":break;case "top-right":A=I.x-A;break;case "bottom-left":F=I.y-F;break;case "bottom-right":A=I.x-A;F=I.y-F;break}z.setAttribute("transform","translate("+A+","+F+")");Q.setAttribute("transform","translate("+-A+","+-F+
")");for(var K in G)K==H.zoom()?G[K].setAttribute("class","active"):G[K].removeAttribute("class")}function y(){for(;z.lastChild;)z.removeChild(z.lastChild);z.appendChild(Q);if(B!="none"){T=z.appendChild(t.svg("g"));T.setAttribute("class","pan");var A=T.appendChild(t.svg("circle"));A.setAttribute("class","back");A.setAttribute("r",l);T.appendChild(i({x:0,y:-n})).setAttribute("transform","rotate(0)");T.appendChild(i({x:n,y:0})).setAttribute("transform","rotate(90)");T.appendChild(i({x:0,y:n})).setAttribute("transform",
"rotate(180)");T.appendChild(i({x:-n,y:0})).setAttribute("transform","rotate(270)");A=T.appendChild(t.svg("circle"));A.setAttribute("fill","none");A.setAttribute("class","fore");A.setAttribute("r",l)}else T=null;if(C!="none"){D=z.appendChild(t.svg("g"));D.setAttribute("class","zoom");A=-0.5;if(C=="big"){G={};var F=H.zoomRange()[0];for(A=0;F<=H.zoomRange()[1];F++,A++)(G[F]=D.appendChild(u(F))).setAttribute("transform","translate(0,"+-(A+0.75)*l*0.4+")")}F=B=="none"?0.4:2;D.setAttribute("transform",
"translate(0,"+l*(/^top-/.test(q)?F+(A+0.5)*0.4:-F)+")");D.appendChild(v(+1)).setAttribute("transform","translate(0,"+-(A+0.5)*l*0.4+")");D.appendChild(v(-1)).setAttribute("transform","scale(-1)")}else D=null;w()}var E={},z=t.svg("g"),G={},l=30,n=16,x=0,h=250,o=50,q="top-left",C="small",D,B="small",N,M,T,J,Q=t.svg("rect"),H,R,O;z.setAttribute("class","compass");Q.setAttribute("class","back fore");Q.setAttribute("pointer-events","none");Q.setAttribute("display","none");E.radius=function(A){if(!arguments.length)return l;
l=A;H&&y();return E};E.speed=function(A){if(!arguments.length)return l;n=A;return E};E.position=function(A){if(!arguments.length)return q;q=A;H&&y();return E};E.pan=function(A){if(!arguments.length)return B;B=A;H&&y();return E};E.zoom=function(A){if(!arguments.length)return C;C=A;H&&y();return E};E.map=function(A){if(!arguments.length)return H;if(H){R.removeEventListener("mousedown",c,false);R.removeChild(z);R=null;O.removeEventListener("mousemove",m,false);O.removeEventListener("mouseup",e,false);
O=null;H.off("move",w).off("resize",w)}if(H=A){R=H.container();R.appendChild(z);R.addEventListener("mousedown",c,false);O=R.ownerDocument.defaultView;O.addEventListener("mousemove",m,false);O.addEventListener("mouseup",e,false);H.on("move",w).on("resize",w);y()}return E};return E};t.grid=function(){function d(){var e=m.firstChild,a=c.size(),f=c.pointLocation($);c.pointLocation(a);var j=Math.pow(2,4-Math.round(c.zoom()));f.lat=Math.floor(f.lat/j)*j;f.lon=Math.ceil(f.lon/j)*j;for(var s;(s=c.locationPoint(f).x)<=
a.x;f.lon+=j){e||(e=m.appendChild(t.svg("line")));e.setAttribute("x1",s);e.setAttribute("x2",s);e.setAttribute("y1",0);e.setAttribute("y2",a.y);e=e.nextSibling}for(;(s=c.locationPoint(f).y)<=a.y;f.lat-=j){e||(e=m.appendChild(t.svg("line")));e.setAttribute("y1",s);e.setAttribute("y2",s);e.setAttribute("x1",0);e.setAttribute("x2",a.x);e=e.nextSibling}for(;e;){a=e.nextSibling;m.removeChild(e);e=a}}var g={},c,m=t.svg("g");m.setAttribute("class","grid");g.map=function(e){if(!arguments.length)return c;
if(c){m.parentNode.removeChild(m);c.off("move",d).off("resize",d)}if(c=e){c.on("move",d).on("resize",d);c.container().appendChild(m);c.dispatch({type:"move"})}return g};return g};t.stylist=function(){function d(e){var a=e.features.length,f=g.length,j=c.length,s,r,k,i,v,u;for(v=0;v<a;++v)if(r=(s=e.features[v]).element){s=s.data;for(u=0;u<f;++u){i=(k=g[u]).value;if(typeof i==="function")i=i.call(null,s);i==null?k.name.local?r.removeAttributeNS(k.name.space,k.name.local):r.removeAttribute(k.name):k.name.local?
r.setAttributeNS(k.name.space,k.name.local,i):r.setAttribute(k.name,i)}for(u=0;u<j;++u){i=(k=c[u]).value;if(typeof i==="function")i=i.call(null,s);i==null?r.style.removeProperty(k.name):r.style.setProperty(k.name,i,k.priority)}if(i=m){if(typeof i==="function")i=i.call(null,s);for(;r.lastChild;)r.removeChild(r.lastChild);i!=null&&r.appendChild(t.svg("title")).appendChild(document.createTextNode(i))}}}var g=[],c=[],m;d.attr=function(e,a){g.push({name:ha(e),value:a});return d};d.style=function(e,a,f){c.push({name:e,
value:a,priority:arguments.length<3?null:f});return d};d.title=function(e){m=e;return d};return d}})(org.polymaps);
